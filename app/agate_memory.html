<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø¹Ù‚ÙŠÙ‚ - Ø¥Ø¹Ø§Ø¯Ø© Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø§Ø¶ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');
        body { font-family: 'Amiri', serif; }
        
        .agate-gem {
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center;
        }
        
        .agate-gem:hover {
            transform: scale(1.2) rotate(5deg);
        }
        
        .reinterpretation-glow {
            animation: pulse-glow 2s infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.3); }
            50% { box-shadow: 0 0 40px rgba(255, 255, 255, 0.8); }
        }
        
        .timeline-flow {
            background: linear-gradient(90deg, 
                rgba(139, 69, 19, 0.1) 0%,
                rgba(255, 215, 0, 0.1) 25%,
                rgba(255, 255, 255, 0.2) 50%,
                rgba(173, 216, 230, 0.1) 75%,
                rgba(128, 0, 128, 0.1) 100%);
        }
        
        .context-bubble {
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .morphing-text {
            transition: all 0.5s ease-in-out;
        }
        
        .speculation-shimmer {
            background: linear-gradient(45deg, 
                rgba(255, 255, 255, 0.1),
                rgba(255, 255, 255, 0.3),
                rgba(255, 255, 255, 0.1));
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900 min-h-screen text-white" 
      x-data="agateMemory()">

    <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="container mx-auto px-6 py-8">
        <div class="text-center mb-12">
            <h1 class="text-5xl font-bold mb-4 bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-600 bg-clip-text text-transparent">
                ğŸ”® Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø¹Ù‚ÙŠÙ‚
            </h1>
            <p class="text-xl text-gray-300 mb-6">Ø¥Ø¹Ø§Ø¯Ø© Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø§Ø¶ÙŠ ÙÙŠ CPF</p>
            <div class="text-sm text-gray-400 bg-black/30 rounded-lg px-4 py-2 inline-block">
                <i class="fas fa-info-circle"></i> Ø§Ù„Ø¹Ù‚ÙŠÙ‚ Ø§Ù„Ù…Ù„ÙˆÙ† = Ø°ÙƒØ±ÙŠØ§Øª Ù…Ø­Ø¯Ø¯Ø© | Ø§Ù„Ø¹Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ø¨ÙŠØ¶ = Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙØ³ÙŠØ±
            </div>
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø³ÙŠØ§Ù‚ -->
        <div class="mb-8 p-6 context-bubble rounded-2xl bg-white/10">
            <h3 class="text-2xl font-bold mb-4 text-center">ğŸ­ ØªØºÙŠÙŠØ± Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ø¹Ø§Ø·ÙÙŠ</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <button @click="changeContext('happy')" 
                        :class="currentContext === 'happy' ? 'ring-4 ring-yellow-400' : ''"
                        class="bg-yellow-500/20 hover:bg-yellow-500/40 p-4 rounded-xl transition-all duration-300 transform hover:scale-105">
                    <div class="text-3xl">ğŸ˜Š</div>
                    <div class="text-sm mt-2">Ø³Ø¹ÙŠØ¯</div>
                </button>
                
                <button @click="changeContext('sad')" 
                        :class="currentContext === 'sad' ? 'ring-4 ring-blue-400' : ''"
                        class="bg-blue-500/20 hover:bg-blue-500/40 p-4 rounded-xl transition-all duration-300 transform hover:scale-105">
                    <div class="text-3xl">ğŸ˜¢</div>
                    <div class="text-sm mt-2">Ø­Ø²ÙŠÙ†</div>
                </button>
                
                <button @click="changeContext('nostalgic')" 
                        :class="currentContext === 'nostalgic' ? 'ring-4 ring-purple-400' : ''"
                        class="bg-purple-500/20 hover:bg-purple-500/40 p-4 rounded-xl transition-all duration-300 transform hover:scale-105">
                    <div class="text-3xl">ğŸŒ…</div>
                    <div class="text-sm mt-2">Ø­Ù†ÙŠÙ†</div>
                </button>
                
                <button @click="changeContext('analytical')" 
                        :class="currentContext === 'analytical' ? 'ring-4 ring-green-400' : ''"
                        class="bg-green-500/20 hover:bg-green-500/40 p-4 rounded-xl transition-all duration-300 transform hover:scale-105">
                    <div class="text-3xl">ğŸ¤”</div>
                    <div class="text-sm mt-2">ØªØ­Ù„ÙŠÙ„ÙŠ</div>
                </button>
            </div>
        </div>

        <!-- Ø§Ù„Ø®Ø· Ø§Ù„Ø²Ù…Ù†ÙŠ -->
        <div class="mb-8">
            <h3 class="text-2xl font-bold mb-6 text-center">â° Ø§Ù„Ø®Ø· Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù„Ø°Ø§ÙƒØ±Ø©</h3>
            
            <!-- Ø­Ø§ÙˆÙŠ Ø§Ù„Ø®Ø· Ø§Ù„Ø²Ù…Ù†ÙŠ -->
            <div class="relative timeline-flow rounded-2xl p-6 min-h-32">
                <div class="flex items-center justify-between h-20 relative">
                    
                    <!-- Ø®Ø· Ø§Ù„Ø²Ù…Ù† -->
                    <div class="absolute top-1/2 left-0 right-0 h-1 bg-gradient-to-r from-yellow-400 via-white to-purple-400 rounded-full"></div>
                    
                    <!-- Ø§Ù„Ø¹Ù‚ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø· Ø§Ù„Ø²Ù…Ù†ÙŠ -->
                    <template x-for="(agate, index) in timeline" :key="index">
                        <div class="relative flex flex-col items-center">
                            <!-- Ø§Ù„Ø¹Ù‚ÙŠÙ‚ Ù†ÙØ³Ù‡ -->
                            <div @click="selectAgate(index)"
                                 :class="[
                                     'agate-gem cursor-pointer w-12 h-12 rounded-full border-4 border-white/50 flex items-center justify-center text-xl relative z-10',
                                     agate.type === 'measured' ? getAgateColor(agate.color) : getWhiteAgateAppearance(agate, index),
                                     selectedAgate === index ? 'ring-4 ring-yellow-300' : '',
                                     agate.type === 'white' && isReinterpreting ? 'reinterpretation-glow' : ''
                                 ]">
                                <span x-text="agate.emoji"></span>
                                
                                <!-- ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ®Ù…ÙŠÙ† Ù„Ù„Ø¹Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ø¨ÙŠØ¶ -->
                                <div x-show="agate.type === 'white' && isReinterpreting" 
                                     class="absolute inset-0 speculation-shimmer rounded-full"></div>
                            </div>
                            
                            <!-- ÙˆØµÙ Ø§Ù„Ø¹Ù‚ÙŠÙ‚ -->
                            <div class="mt-3 text-center">
                                <div class="text-xs bg-black/50 rounded-full px-3 py-1 whitespace-nowrap morphing-text"
                                     x-text="getAgateDescription(agate)"></div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>

        <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù‚ÙŠÙ‚ Ø§Ù„Ù…Ø®ØªØ§Ø± -->
        <div x-show="selectedAgate !== null" 
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 transform scale-95"
             x-transition:enter-end="opacity-100 transform scale-100"
             class="mb-8 p-6 context-bubble rounded-2xl bg-white/10">
            
            <template x-if="selectedAgate !== null">
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-center">
                        <span x-text="timeline[selectedAgate]?.emoji"></span>
                        ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù‚ÙŠÙ‚
                    </h3>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <i class="fas fa-gem text-yellow-400"></i>
                                <span class="font-semibold">Ø§Ù„Ù†ÙˆØ¹:</span>
                                <span x-text="timeline[selectedAgate]?.type === 'measured' ? 'Ø¹Ù‚ÙŠÙ‚ Ù…Ù„ÙˆÙ† (Ù…ÙÙ‚Ø§Ø³)' : 'Ø¹Ù‚ÙŠÙ‚ Ø£Ø¨ÙŠØ¶ (Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙØ³ÙŠØ±)'"></span>
                            </div>
                            
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <i class="fas fa-clock text-blue-400"></i>
                                <span class="font-semibold">Ø§Ù„ÙˆÙ‚Øª:</span>
                                <span x-text="timeline[selectedAgate]?.time"></span>
                            </div>
                            
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <i class="fas fa-heart text-red-400"></i>
                                <span class="font-semibold">Ø§Ù„Ù…Ø­ØªÙˆÙ‰:</span>
                                <span x-text="timeline[selectedAgate]?.content"></span>
                            </div>
                        </div>
                        
                        <!-- Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ø¹Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ø¨ÙŠØ¶ -->
                        <div x-show="timeline[selectedAgate]?.type === 'white'" class="space-y-3">
                            <h4 class="font-bold text-lg text-yellow-400">
                                <i class="fas fa-magic"></i> Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ù…Ø­ØªÙ…Ù„:
                            </h4>
                            <div class="bg-black/30 rounded-lg p-4">
                                <p class="morphing-text" x-text="getWhiteAgateInterpretation(timeline[selectedAgate])"></p>
                            </div>
                            
                            <!-- Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ© -->
                            <div class="text-sm text-gray-400">
                                <strong>Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ©:</strong>
                                <span x-text="timeline[selectedAgate]?.constraints"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… -->
        <div class="grid md:grid-cols-3 gap-4 mb-8">
            <div class="bg-green-500/20 rounded-xl p-4 text-center">
                <div class="text-2xl mb-2">ğŸ“Š</div>
                <div class="font-semibold">Ø§Ù„Ø¹Ù‚ÙŠÙ‚ Ø§Ù„Ù…Ù„ÙˆÙ†</div>
                <div class="text-2xl font-bold" x-text="timeline.filter(a => a.type === 'measured').length"></div>
            </div>
            
            <div class="bg-white/20 rounded-xl p-4 text-center">
                <div class="text-2xl mb-2">ğŸ”</div>
                <div class="font-semibold">Ø§Ù„Ø¹Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ø¨ÙŠØ¶</div>
                <div class="text-2xl font-bold" x-text="timeline.filter(a => a.type === 'white').length"></div>
            </div>
            
            <div class="bg-purple-500/20 rounded-xl p-4 text-center">
                <div class="text-2xl mb-2">ğŸ­</div>
                <div class="font-semibold">Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
                <div class="text-sm font-bold morphing-text" x-text="contextDescriptions[currentContext]"></div>
            </div>
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="text-center space-x-4 space-x-reverse">
            <button @click="reinterpretTimeline()" 
                    :disabled="isReinterpreting"
                    class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105">
                <i class="fas fa-sync-alt" :class="isReinterpreting ? 'animate-spin' : ''"></i>
                Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ³ÙŠØ± Ø§Ù„Ø¹Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ø¨ÙŠØ¶
            </button>
            
            <button @click="resetTimeline()" 
                    class="bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105">
                <i class="fas fa-undo"></i>
                Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
            </button>
        </div>

        <!-- ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ù…ÙÙ‡ÙˆÙ… -->
        <div class="mt-12 bg-black/30 rounded-2xl p-6">
            <h3 class="text-xl font-bold mb-4 text-center">ğŸ’¡ ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ù‡Ø°Ø§ ÙÙŠ CPFØŸ</h3>
            <div class="grid md:grid-cols-2 gap-6 text-sm">
                <div>
                    <h4 class="font-bold text-yellow-400 mb-2">Ø§Ù„Ø¹Ù‚ÙŠÙ‚ Ø§Ù„Ù…Ù„ÙˆÙ† (Measured Agate):</h4>
                    <ul class="space-y-1 text-gray-300">
                        <li>â€¢ Ù†ØªØ§Ø¦Ø¬ generative_collapse Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©</li>
                        <li>â€¢ Ù‚Ø±Ø§Ø±Ø§Øª ÙˆØ£Ø­Ø¯Ø§Ø« Ù…ÙÙ‚Ø§Ø³Ø© ÙˆÙ„Ø§ ØªØªØºÙŠØ±</li>
                        <li>â€¢ ØªØ´ÙƒÙ„ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ Ù„Ù„Ø®Ø· Ø§Ù„Ø²Ù…Ù†ÙŠ</li>
                        <li>â€¢ ÙƒÙ„ Ù„ÙˆÙ† ÙŠÙ…Ø«Ù„ Ù†ÙˆØ¹ Ù…Ø®ØªÙ„Ù Ù…Ù† Ø§Ù„ØªØ¬Ø§Ø±Ø¨</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-white mb-2">Ø§Ù„Ø¹Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ø¨ÙŠØ¶ (White Agate):</h4>
                    <ul class="space-y-1 text-gray-300">
                        <li>â€¢ Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…Ø© ÙˆÙ‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙØ³ÙŠØ±</li>
                        <li>â€¢ ØªØªØºÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ø¹Ø§Ø·ÙÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ</li>
                        <li>â€¢ Ù…Ù‚ÙŠØ¯Ø© Ø¨Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ© ÙˆØ§Ù„ÙÙŠØ²ÙŠØ§Ø¦ÙŠØ©</li>
                        <li>â€¢ ØªØ³Ù…Ø­ Ø¨Ø¥Ø¹Ø§Ø¯Ø© Ù‚Ø±Ø§Ø¡Ø© Ù…Ø±Ù†Ø© Ù„Ù„Ù…Ø§Ø¶ÙŠ</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        function agateMemory() {
            return {
                currentContext: 'happy',
                selectedAgate: null,
                isReinterpreting: false,
                
                contextDescriptions: {
                    happy: 'ğŸ˜Š Ù…ØªÙØ§Ø¦Ù„ ÙˆÙ…Ø¨Ù‡Ø¬',
                    sad: 'ğŸ˜¢ Ø­Ø²ÙŠÙ† ÙˆÙ…ØªØ£Ù…Ù„',
                    nostalgic: 'ğŸŒ… Ø­Ù†ÙŠÙ† Ù„Ù„Ù…Ø§Ø¶ÙŠ',
                    analytical: 'ğŸ¤” Ù…Ù†Ø·Ù‚ÙŠ ÙˆØªØ­Ù„ÙŠÙ„ÙŠ'
                },
                
                timeline: [
                    {
                        type: 'measured',
                        color: 'yellow',
                        emoji: 'ğŸŒŸ',
                        time: '09:00',
                        content: 'Ù‚Ø±Ø§Ø± Ø¨Ø¯Ø¡ ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯',
                        originalContent: 'Ù‚Ø±Ø§Ø± Ø¨Ø¯Ø¡ ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯'
                    },
                    {
                        type: 'white',
                        emoji: 'âšª',
                        time: '09:30-11:00',
                        content: 'ÙØªØ±Ø© ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©',
                        constraints: 'Ù‚ÙŠÙˆØ¯ Ø¬ØºØ±Ø§ÙÙŠØ©: Ø§Ù„Ø¨ÙŠØª-Ø§Ù„Ø¹Ù…Ù„ØŒ ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„Ù†Ù‚Ù„ Ù…ØªØ§Ø­Ø©',
                        interpretations: {
                            happy: 'Ø±Ø¨Ù…Ø§ ØªÙ†Ø§ÙˆÙ„Øª ÙØ·Ø§Ø±Ø§Ù‹ Ù„Ø°ÙŠØ°Ø§Ù‹ ÙˆØªØ­Ø¯Ø«Øª Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ğŸ˜‹',
                            sad: 'ÙØªØ±Ø© ØªØ£Ù…Ù„ ÙˆØªÙÙƒÙŠØ± ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© ğŸ˜”',
                            nostalgic: 'Ø§Ø³ØªØ°ÙƒØ§Ø± Ø°ÙƒØ±ÙŠØ§Øª Ø¬Ù…ÙŠÙ„Ø© Ù…Ù† Ø§Ù„Ù…Ø§Ø¶ÙŠ ğŸŒ¸',
                            analytical: 'ØªØ®Ø·ÙŠØ· Ù…Ù†Ù‡Ø¬ÙŠ Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ… ÙˆØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª ğŸ“‹'
                        }
                    },
                    {
                        type: 'measured',
                        color: 'blue',
                        emoji: 'ğŸ’¼',
                        time: '11:00',
                        content: 'ÙˆØµÙˆÙ„ Ù„Ù„Ø¹Ù…Ù„',
                        originalContent: 'ÙˆØµÙˆÙ„ Ù„Ù„Ø¹Ù…Ù„'
                    },
                    {
                        type: 'white',
                        emoji: 'âšª',
                        time: '11:00-15:00',
                        content: 'ÙØªØ±Ø© Ø§Ù„Ø¹Ù…Ù„',
                        constraints: 'Ù‚ÙŠÙˆØ¯ Ù…Ù‡Ù†ÙŠØ©: Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ù…Ù…ÙƒÙ†Ø©ØŒ Ù…Ù‡Ø§Ù… Ù…Ø­Ø¯Ø¯Ø©',
                        interpretations: {
                            happy: 'ÙŠÙˆÙ… Ø¹Ù…Ù„ Ù…Ù†ØªØ¬ ÙˆÙ…Ù„ÙŠØ¡ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø¬Ù…ÙŠÙ„Ø© ğŸš€',
                            sad: 'ÙŠÙˆÙ… ØµØ¹Ø¨ Ù…Ù„ÙŠØ¡ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª ÙˆØ§Ù„Ø¶ØºÙˆØ· âš¡',
                            nostalgic: 'Ø§Ø³ØªØ°ÙƒØ§Ø± Ø¨Ø¯Ø§ÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø²Ù…Ù„Ø§Ø¡ Ø§Ù„Ù‚Ø¯Ø§Ù…Ù‰ ğŸ‘¥',
                            analytical: 'ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ© ğŸ”§'
                        }
                    },
                    {
                        type: 'measured',
                        color: 'green',
                        emoji: 'ğŸ ',
                        time: '15:00',
                        content: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¨ÙŠØª',
                        originalContent: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¨ÙŠØª'
                    },
                    {
                        type: 'white',
                        emoji: 'âšª',
                        time: '15:00-22:00',
                        content: 'Ø£Ù…Ø³ÙŠØ© ÙÙŠ Ø§Ù„Ø¨ÙŠØª',
                        constraints: 'Ù‚ÙŠÙˆØ¯ Ù…Ù†Ø²Ù„ÙŠØ©: ÙˆÙ‚Øª Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©ØŒ Ø£Ù†Ø´Ø·Ø© Ø´Ø®ØµÙŠØ©',
                        interpretations: {
                            happy: 'Ø£Ù…Ø³ÙŠØ© Ø±Ø§Ø¦Ø¹Ø© Ù…Ø¹ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© ÙˆØ§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© ğŸ‰',
                            sad: 'ÙˆÙ‚Øª Ù‡Ø§Ø¯Ø¦ Ù„Ù„Ø±Ø§Ø­Ø© ÙˆØ§Ù„ØªÙÙƒÙŠØ± ÙÙŠ Ø§Ù„Ù†ÙØ³ ğŸ•¯ï¸',
                            nostalgic: 'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØµÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ø¬Ù…ÙŠÙ„Ø© ğŸ“¸',
                            analytical: 'ØªØ¹Ù„Ù… Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯ Ø£Ùˆ Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ù…Ø´Ø±ÙˆØ¹ Ø´Ø®ØµÙŠ ğŸ“š'
                        }
                    }
                ],
                
                getAgateColor(color) {
                    const colors = {
                        yellow: 'bg-gradient-to-br from-yellow-400 to-yellow-600',
                        blue: 'bg-gradient-to-br from-blue-400 to-blue-600',
                        red: 'bg-gradient-to-br from-red-400 to-red-600',
                        green: 'bg-gradient-to-br from-green-400 to-green-600',
                        purple: 'bg-gradient-to-br from-purple-400 to-purple-600',
                        black: 'bg-gradient-to-br from-gray-700 to-black'
                    };
                    return colors[color] || 'bg-gray-500';
                },
                
                getWhiteAgateAppearance(agate, index) {
                    if (this.isReinterpreting) {
                        return 'bg-gradient-to-br from-white/60 to-gray-300/60 animate-pulse';
                    }
                    return 'bg-gradient-to-br from-white/40 to-gray-300/40';
                },
                
                getAgateDescription(agate) {
                    if (agate.type === 'measured') {
                        return agate.content;
                    } else {
                        return agate.interpretations[this.currentContext] || agate.content;
                    }
                },
                
                getWhiteAgateInterpretation(agate) {
                    return agate.interpretations[this.currentContext] || 'ÙØªØ±Ø© ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙØ³ÙŠØ±';
                },
                
                changeContext(newContext) {
                    this.currentContext = newContext;
                    this.selectedAgate = null;
                    
                    // ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ù„Ù„ØªØºÙŠÙŠØ±
                    setTimeout(() => {
                        this.reinterpretTimeline();
                    }, 300);
                },
                
                selectAgate(index) {
                    this.selectedAgate = this.selectedAgate === index ? null : index;
                },
                
                async reinterpretTimeline() {
                    if (this.isReinterpreting) return;
                    
                    this.isReinterpreting = true;
                    
                    // Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙØ³ÙŠØ±
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª (ÙŠØ­Ø¯Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø®Ù„Ø§Ù„ reactivity)
                    this.isReinterpreting = false;
                },
                
                resetTimeline() {
                    this.currentContext = 'happy';
                    this.selectedAgate = null;
                    this.isReinterpreting = false;
                }
            }
        }
    </script>
