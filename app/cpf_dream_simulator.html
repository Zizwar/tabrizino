<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ™ Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„ÙƒÙ…ÙŠ | Quantum Dream Simulator</title>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/webppl@0.9.15/webppl.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=IBM+Plex+Sans+Arabic:wght@300;400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'IBM Plex Sans Arabic', sans-serif;
            background: linear-gradient(135deg, #0a0a23 0%, #1a1a3a 50%, #2a1a3a 100%);
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        /* Dream Particle System */
        #dreamCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        
        /* Reality Transition Effect */
        .reality-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, 
                transparent 0%, 
                rgba(147, 51, 234, 0.1) 25%, 
                rgba(59, 130, 246, 0.15) 50%, 
                rgba(147, 51, 234, 0.1) 75%, 
                transparent 100%);
            animation: dreamWave 8s ease-in-out infinite;
            z-index: 2;
            pointer-events: none;
        }
        
        @keyframes dreamWave {
            0%, 100% { opacity: 0; transform: translateX(-100%); }
            50% { opacity: 1; transform: translateX(100%); }
        }
        
        /* Neural Wave Animation */
        .neural-wave {
            position: absolute;
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3b82f6, transparent);
            animation: neuralPulse 3s ease-in-out infinite;
        }
        
        @keyframes neuralPulse {
            0%, 100% { opacity: 0; transform: translateX(-200px) scaleX(0.5); }
            50% { opacity: 1; transform: translateX(200px) scaleX(2); }
        }
        
        /* Main Container */
        .dream-container {
            position: relative;
            z-index: 10;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Header */
        .dream-header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 2px solid rgba(147, 51, 234, 0.3);
        }
        
        .dream-title {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(45deg, #3b82f6, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            animation: titleGlow 4s ease-in-out infinite;
        }
        
        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.5) drop-shadow(0 0 20px rgba(139, 92, 246, 0.5)); }
        }
        
        /* Control Panel */
        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .control-card {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .control-card:hover {
            border-color: rgba(139, 92, 246, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.2);
        }
        
        /* Sleep Stages */
        .sleep-stages {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        
        .sleep-stage {
            flex: 1;
            text-align: center;
            padding: 15px;
            margin: 0 5px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .sleep-stage.active {
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }
        
        /* Dream Button */
        .dream-button {
            background: linear-gradient(45deg, #3b82f6, #8b5cf6, #ec4899);
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .dream-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
        }
        
        .dream-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }
        
        .dream-button:hover:before {
            left: 100%;
        }
        
        /* Simulators Grid */
        .simulators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .simulator-card {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .simulator-card.active {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
        }
        
        .simulator-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .simulator-card.active:before {
            transform: scaleX(1);
        }
        
        /* Memory Bank */
        .memory-bank {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(236, 72, 153, 0.3);
        }
        
        .memory-sequence {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .memory-item {
            background: rgba(236, 72, 153, 0.2);
            border: 1px solid rgba(236, 72, 153, 0.4);
            border-radius: 25px;
            padding: 8px 16px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .memory-item:hover {
            background: rgba(236, 72, 153, 0.4);
            transform: scale(1.05);
        }
        
        .memory-item.active {
            background: linear-gradient(45deg, #ec4899, #8b5cf6);
            animation: memoryPulse 2s ease-in-out infinite;
        }
        
        @keyframes memoryPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }
        
        /* Dream Visualization */
        .dream-visualization {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(139, 92, 246, 0.3);
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }
        
        .wave-pattern {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0.3;
        }
        
        /* WebPPL Console */
        .webppl-console {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(34, 197, 94, 0.5);
        }
        
        .console-line {
            margin: 5px 0;
            padding: 5px;
            border-radius: 5px;
        }
        
        .console-line.probability {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
        }
        
        .console-line.quantum {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }
        
        .console-line.wave {
            background: rgba(139, 92, 246, 0.1);
            color: #8b5cf6;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .dream-title {
                font-size: 2rem;
            }
            
            .control-panel {
                grid-template-columns: 1fr;
            }
            
            .simulators-grid {
                grid-template-columns: 1fr;
            }
            
            .sleep-stages {
                flex-direction: column;
                gap: 10px;
            }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #2563eb, #7c3aed);
        }
    </style>
</head>
<body>
    <!-- Reality Transition Effect -->
    <div class="reality-transition" x-show="isDreaming"></div>
    
    <!-- Dream Canvas -->
    <canvas id="dreamCanvas"></canvas>
    
    <!-- Neural Waves -->
    <div class="neural-wave" style="top: 20%; animation-delay: 0s;"></div>
    <div class="neural-wave" style="top: 40%; animation-delay: 1s;"></div>
    <div class="neural-wave" style="top: 60%; animation-delay: 2s;"></div>
    <div class="neural-wave" style="top: 80%; animation-delay: 3s;"></div>

    <div class="dream-container" x-data="dreamSimulator()">
        <!-- Header -->
        <div class="dream-header">
            <h1 class="dream-title">ğŸŒ™ Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„ÙƒÙ…ÙŠ</h1>
            <p style="font-size: 1.2rem; opacity: 0.8; margin-bottom: 10px;">Quantum Dream Simulator with WebPPL & Neural Wave Dynamics</p>
            <p style="opacity: 0.7;">Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù„Ù…ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø­Ù„Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ù…Ø°Ø¬Ø© Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© ÙˆØ§Ù„ØªØ¯Ø§Ø®Ù„ Ø§Ù„Ù…ÙˆØ¬ÙŠ Ø§Ù„Ù…Ø¹Ø±ÙÙŠ</p>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <!-- Sleep Control -->
            <div class="control-card">
                <h3 style="margin-bottom: 20px; color: #3b82f6;">ğŸ§  Ù…Ø±Ø§Ù‚Ø¨ Ø§Ù„Ù†ÙˆÙ…</h3>
                <button @click="toggleDreaming()" class="dream-button">
                    <span x-text="isDreaming ? 'â° Ø§Ø³ØªÙŠÙ‚Ø¸ Ù…Ù† Ø§Ù„Ø­Ù„Ù…' : 'ğŸŒ™ Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ù„Ù…'"></span>
                </button>
                
                <div class="sleep-stages">
                    <div class="sleep-stage" :class="{'active': sleepStage === 'Ù†ÙˆÙ… Ø®ÙÙŠÙ'}">
                        <div>ğŸ’¤</div>
                        <div style="font-size: 0.8rem;">Ù†ÙˆÙ… Ø®ÙÙŠÙ</div>
                    </div>
                    <div class="sleep-stage" :class="{'active': sleepStage === 'Ù†ÙˆÙ… Ø¹Ù…ÙŠÙ‚'}">
                        <div>ğŸ§ </div>
                        <div style="font-size: 0.8rem;">Ù†ÙˆÙ… Ø¹Ù…ÙŠÙ‚</div>
                    </div>
                    <div class="sleep-stage" :class="{'active': sleepStage === 'Ù†ÙˆÙ… Ø§Ù„Ø£Ø­Ù„Ø§Ù… (REM)'}">
                        <div>ğŸŒˆ</div>
                        <div style="font-size: 0.8rem;">REM</div>
                    </div>
                    <div class="sleep-stage" :class="{'active': sleepStage === 'Ø§Ù„Ø§Ø³ØªÙŠÙ‚Ø§Ø¸'}">
                        <div>â˜€ï¸</div>
                        <div style="font-size: 0.8rem;">ÙŠÙ‚Ø¸Ø©</div>
                    </div>
                </div>
                
                <div style="margin: 15px 0;">
                    <label style="display: block; margin-bottom: 5px;">ÙˆØ¶ÙˆØ­ Ø§Ù„Ø­Ù„Ù…:</label>
                    <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px;">
                        <div style="background: linear-gradient(90deg, #3b82f6, #8b5cf6); height: 100%; border-radius: 4px; transition: width 0.3s ease;"
                             :style="`width: ${dreamClarity * 100}%`"></div>
                    </div>
                    <span style="font-size: 0.8rem; opacity: 0.8;" x-text="`${Math.round(dreamClarity * 100)}%`"></span>
                </div>
                
                <div style="margin: 15px 0;">
                    <label style="display: block; margin-bottom: 5px;">ØªØ´ÙˆÙŠØ´ Ø§Ù„ÙˆØ§Ù‚Ø¹:</label>
                    <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px;">
                        <div style="background: linear-gradient(90deg, #ec4899, #f59e0b); height: 100%; border-radius: 4px; transition: width 0.3s ease;"
                             :style="`width: ${noiseLevel * 100}%`"></div>
                    </div>
                    <span style="font-size: 0.8rem; opacity: 0.8;" x-text="`${Math.round(noiseLevel * 100)}%`"></span>
                </div>
            </div>

            <!-- Wave Dynamics -->
            <div class="control-card">
                <h3 style="margin-bottom: 20px; color: #8b5cf6;">ğŸŒŠ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Øª Ø§Ù„Ù…ÙˆØ¬Ø§Øª</h3>
                <div style="margin: 15px 0;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0;">
                        <span style="font-size: 0.9rem;">Ù…ÙˆØ¬Ø§Øª Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡:</span>
                        <div style="width: 60px; height: 20px; background: rgba(59, 130, 246, 0.3); border-radius: 10px; position: relative;">
                            <div style="position: absolute; width: 8px; height: 8px; background: #3b82f6; border-radius: 50%; top: 6px; animation: waveOscillate 2s ease-in-out infinite;"
                                 :style="`left: ${oscillators.attention * 50 + 6}px`"></div>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0;">
                        <span style="font-size: 0.9rem;">Ù…ÙˆØ¬Ø§Øª Ø¹Ø§Ø·ÙÙŠØ©:</span>
                        <div style="width: 60px; height: 20px; background: rgba(139, 92, 246, 0.3); border-radius: 10px; position: relative;">
                            <div style="position: absolute; width: 8px; height: 8px; background: #8b5cf6; border-radius: 50%; top: 6px; animation: waveOscillate 3s ease-in-out infinite;"
                                 :style="`left: ${oscillators.emotional * 50 + 6}px`"></div>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0;">
                        <span style="font-size: 0.9rem;">Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªÙÙƒÙŠØ±:</span>
                        <div style="width: 60px; height: 20px; background: rgba(236, 72, 153, 0.3); border-radius: 10px; position: relative;">
                            <div style="position: absolute; width: 8px; height: 8px; background: #ec4899; border-radius: 50%; top: 6px; animation: waveOscillate 1.5s ease-in-out infinite;"
                                 :style="`left: ${oscillators.cognitive * 50 + 6}px`"></div>
                        </div>
                    </div>
                </div>
                
                <div style="margin: 20px 0; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 10px;">
                    <h4 style="margin-bottom: 10px; color: #22c55e;">Ø§Ù„ØªØ¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠ:</h4>
                    <div style="font-size: 0.85rem; opacity: 0.9;">
                        <div>Ù†ÙˆØ¹ Ø§Ù„ØªØ¯Ø§Ø®Ù„: <span x-text="interferenceType" style="color: #3b82f6;"></span></div>
                        <div>Ù‚ÙˆØ© Ø§Ù„ØªÙ…Ø§Ø³Ùƒ: <span x-text="`${Math.round(coherenceStrength * 100)}%`" style="color: #8b5cf6;"></span></div>
                        <div>ØªØ±Ø¯Ø¯ Ø§Ù„ØªØ²Ø§Ù…Ù†: <span x-text="`${resonanceFrequency.toFixed(2)} Hz`" style="color: #ec4899;"></span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cognitive Simulators -->
        <div class="simulators-grid">
            <!-- Reality Processor -->
            <div class="simulator-card" :class="{'active': activeSimulators.includes('reality_processor')}">
                <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    ğŸ” Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„ÙˆØ§Ù‚Ø¹
                    <span style="font-size: 0.7rem; background: rgba(59, 130, 246, 0.3); padding: 3px 8px; border-radius: 12px;" 
                          x-show="activeSimulators.includes('reality_processor')">Ù†Ø´Ø·</span>
                </h3>
                <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">
                    ÙŠØ­ÙˆÙ„ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª ÙˆØ§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø¥Ù„Ù‰ Ø¹Ù†Ø§ØµØ± Ø­Ù„Ù…
                </div>
                <div style="background: rgba(59, 130, 246, 0.1); border-radius: 8px; padding: 12px; font-size: 0.8rem;">
                    <div style="margin-bottom: 8px;">Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª: Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©</div>
                    <div>Ø§Ù„Ù†ÙˆØ§ØªØ¬: <span style="color: #3b82f6;" x-text="dreamContent.reality_fragments.join(', ')"></span></div>
                </div>
            </div>

            <!-- Prediction Engine -->
            <div class="simulator-card" :class="{'active': activeSimulators.includes('prediction_engine')}">
                <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    ğŸ”® Ù…Ø­Ø±Ùƒ Ø§Ù„ØªÙ†Ø¨Ø¤
                    <span style="font-size: 0.7rem; background: rgba(139, 92, 246, 0.3); padding: 3px 8px; border-radius: 12px;" 
                          x-show="activeSimulators.includes('prediction_engine')">Ù†Ø´Ø·</span>
                </h3>
                <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">
                    ÙŠÙ†Ø´Ø¦ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© ÙˆØªÙˆÙ‚Ø¹Ø§Øª Ø®ÙŠØ§Ù„ÙŠØ©
                </div>
                <div style="background: rgba(139, 92, 246, 0.1); border-radius: 8px; padding: 12px; font-size: 0.8rem;">
                    <div style="margin-bottom: 8px;">Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©: Ø§Ù„ØªÙ†Ø¨Ø¤Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©</div>
                    <div>Ø§Ù„Ù†ÙˆØ§ØªØ¬: <span style="color: #8b5cf6;" x-text="dreamContent.future_scenarios.join(', ')"></span></div>
                </div>
            </div>

            <!-- Memory Reconstructor -->
            <div class="simulator-card" :class="{'active': activeSimulators.includes('memory_reconstructor')}">
                <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    ğŸ§© Ù…Ø¹ÙŠØ¯ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø°Ø§ÙƒØ±Ø©
                    <span style="font-size: 0.7rem; background: rgba(236, 72, 153, 0.3); padding: 3px 8px; border-radius: 12px;" 
                          x-show="activeSimulators.includes('memory_reconstructor')">Ù†Ø´Ø·</span>
                </h3>
                <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">
                    ÙŠÙ…Ø²Ø¬ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© ÙˆØºÙŠØ± Ù…Ù†Ø·Ù‚ÙŠØ©
                </div>
                <div style="background: rgba(236, 72, 153, 0.1); border-radius: 8px; padding: 12px; font-size: 0.8rem;">
                    <div style="margin-bottom: 8px;">Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©: Ø®Ù„ÙŠØ· Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª</div>
                    <div>Ø§Ù„Ù†ÙˆØ§ØªØ¬: <span style="color: #ec4899;" x-text="dreamContent.mixed_memories"></span></div>
                </div>
            </div>

            <!-- Pattern Explorer -->
            <div class="simulator-card" :class="{'active': activeSimulators.includes('pattern_explorer')}">
                <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    ğŸ”„ Ù…Ø³ØªÙƒØ´Ù Ø§Ù„Ø£Ù†Ù…Ø§Ø·
                    <span style="font-size: 0.7rem; background: rgba(34, 197, 94, 0.3); padding: 3px 8px; border-radius: 12px;" 
                          x-show="activeSimulators.includes('pattern_explorer')">Ù†Ø´Ø·</span>
                </h3>
                <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">
                    ÙŠÙƒØªØ´Ù Ø±ÙˆØ§Ø¨Ø· Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ£Ù†Ù…Ø§Ø· Ù…Ø®ÙÙŠØ©
                </div>
                <div style="background: rgba(34, 197, 94, 0.1); border-radius: 8px; padding: 12px; font-size: 0.8rem;">
                    <div style="margin-bottom: 8px;">Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©: Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</div>
                    <div>Ø§Ù„Ù†ÙˆØ§ØªØ¬: <span style="color: #22c55e;">Ø£Ù†Ù…Ø§Ø· Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</span></div>
                </div>
            </div>

            <!-- Social Modeler -->
            <div class="simulator-card" :class="{'active': activeSimulators.includes('social_modeler')}">
                <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    ğŸ‘¥ Ø§Ù„Ù†Ù…Ø°Ø¬Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©
                    <span style="font-size: 0.7rem; background: rgba(245, 158, 11, 0.3); padding: 3px 8px; border-radius: 12px;" 
                          x-show="activeSimulators.includes('social_modeler')">Ù†Ø´Ø·</span>
                </h3>
                <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">
                    ÙŠØ­Ø§ÙƒÙŠ Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
                </div>
                <div style="background: rgba(245, 158, 11, 0.1); border-radius: 8px; padding: 12px; font-size: 0.8rem;">
                    <div style="margin-bottom: 8px;">Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©: Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©</div>
                    <div>Ø§Ù„Ù†ÙˆØ§ØªØ¬: <span style="color: #f59e0b;">Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ©</span></div>
                </div>
            </div>

            <!-- Quantum Calculator -->
            <div class="simulator-card" :class="{'active': true}">
                <h3 style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    âš›ï¸ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ÙƒÙ…
                    <span style="font-size: 0.7rem; background: rgba(168, 85, 247, 0.3); padding: 3px 8px; border-radius: 12px;">Ø¯Ø§Ø¦Ù… Ø§Ù„Ù†Ø´Ø§Ø·</span>
                </h3>
                <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">
                    Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠ ÙˆØ§Ù„ØªØ±Ø§ÙƒØ¨ Ø§Ù„Ù…ÙˆØ¬ÙŠ
                </div>
                <div style="background: rgba(168, 85, 247, 0.1); border-radius: 8px; padding: 12px; font-size: 0.8rem;">
                    <div>Ø§Ù„ØªØ±Ø§ÙƒØ¨ Ø§Ù„ÙƒÙ…ÙŠ: <span style="color: #a855f7;" x-text="`${quantumSuperposition}%`"></span></div>
                    <div>Ù…ÙˆØ¬Ø© Ø§Ù„ØªØ¯Ø§Ø®Ù„: <span style="color: #a855f7;" x-text="waveInterference"></span></div>
                    <div>Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø§Ù„Ø§Ù†Ù‡ÙŠØ§Ø±: <span style="color: #a855f7;" x-text="`${collapseprobability.toFixed(3)}`"></span></div>
                </div>
            </div>
        </div>

        <!-- Extended Memory Bank -->
        <div class="memory-bank">
            <h3 style="margin-bottom: 20px; color: #ec4899;">ğŸ’ Ø¨Ù†Ùƒ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ù…Ù…ØªØ¯</h3>
            <p style="opacity: 0.8; margin-bottom: 20px;">Ø³Ù„Ø³Ù„Ø© Ø·ÙˆÙŠÙ„Ø© Ù…Ù† Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª ÙˆØ§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø© ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ©</p>
            
            <div style="margin: 20px 0;">
                <h4 style="color: #3b82f6; margin-bottom: 10px;">ğŸ§  Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ø·ÙÙˆÙ„Ø©:</h4>
                <div class="memory-sequence">
                    <span class="memory-item" :class="{'active': activeMemories.includes('playground')}" @click="toggleMemory('playground')">Ù…Ù„Ø¹Ø¨ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('birthday')}" @click="toggleMemory('birthday')">Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø§Ù„Ø³Ø§Ø¨Ø¹Ø©</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('grandmother')}" @click="toggleMemory('grandmother')">Ø­ÙƒØ§ÙŠØ§Øª Ø§Ù„Ø¬Ø¯Ø©</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('first_bike')}" @click="toggleMemory('first_bike')">Ø£ÙˆÙ„ Ø¯Ø±Ø§Ø¬Ø©</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('summer_trip')}" @click="toggleMemory('summer_trip')">Ø±Ø­Ù„Ø© Ø§Ù„ØµÙŠÙ</span>
                </div>
            </div>
            
            <div style="margin: 20px 0;">
                <h4 style="color: #8b5cf6; margin-bottom: 10px;">ğŸ“š Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ù…Ø±Ø§Ù‡Ù‚Ø©:</h4>
                <div class="memory-sequence">
                    <span class="memory-item" :class="{'active': activeMemories.includes('first_love')}" @click="toggleMemory('first_love')">Ø§Ù„Ø­Ø¨ Ø§Ù„Ø£ÙˆÙ„</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('graduation')}" @click="toggleMemory('graduation')">Ø§Ù„ØªØ®Ø±Ø¬</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('friends_group')}" @click="toggleMemory('friends_group')">Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('exam_stress')}" @click="toggleMemory('exam_stress')">Ù‚Ù„Ù‚ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('talent_show')}" @click="toggleMemory('talent_show')">Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ù‡Ø¨</span>
                </div>
            </div>
            
            <div style="margin: 20px 0;">
                <h4 style="color: #22c55e; margin-bottom: 10px;">ğŸ’¼ Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ø¨Ù„ÙˆØº:</h4>
                <div class="memory-sequence">
                    <span class="memory-item" :class="{'active': activeMemories.includes('first_job')}" @click="toggleMemory('first_job')">Ø£ÙˆÙ„ ÙˆØ¸ÙŠÙØ©</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('wedding')}" @click="toggleMemory('wedding')">Ø­ÙÙ„ Ø§Ù„Ø²ÙØ§Ù</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('travel_abroad')}" @click="toggleMemory('travel_abroad')">Ø³ÙØ± Ù„Ù„Ø®Ø§Ø±Ø¬</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('achievement')}" @click="toggleMemory('achievement')">Ø¥Ù†Ø¬Ø§Ø² Ù…Ù‡Ù…</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('loss')}" @click="toggleMemory('loss')">ÙÙ‚Ø¯Ø§Ù† Ø¹Ø²ÙŠØ²</span>
                </div>
            </div>
            
            <div style="margin: 20px 0;">
                <h4 style="color: #f59e0b; margin-bottom: 10px;">ğŸŒŸ Ø°ÙƒØ±ÙŠØ§Øª Ø­Ø¯ÙŠØ«Ø©:</h4>
                <div class="memory-sequence">
                    <span class="memory-item" :class="{'active': activeMemories.includes('pandemic')}" @click="toggleMemory('pandemic')">ÙØªØ±Ø© Ø§Ù„Ø¬Ø§Ø¦Ø­Ø©</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('new_hobby')}" @click="toggleMemory('new_hobby')">Ù‡ÙˆØ§ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('career_change')}" @click="toggleMemory('career_change')">ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù‡Ù†Ø©</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('family_reunion')}" @click="toggleMemory('family_reunion')">Ù„Ù… Ø´Ù…Ù„ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</span>
                    <span class="memory-item" :class="{'active': activeMemories.includes('yesterday')}" @click="toggleMemory('yesterday')">Ø£Ù…Ø³</span>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(236, 72, 153, 0.1); border-radius: 10px; border-left: 4px solid #ec4899;">
                <div style="font-size: 0.9rem;">
                    <strong>Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©:</strong> <span x-text="activeMemories.length"></span> Ù…Ù† 20
                </div>
                <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">
                    Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡: <span x-text="`${(activeMemories.length / 20 * 100).toFixed(1)}%`"></span>
                </div>
            </div>
        </div>

        <!-- Dream Visualization -->
        <div class="dream-visualization">
            <h3 style="margin-bottom: 20px; color: #8b5cf6;">ğŸŒˆ ØªØµÙˆØ± Ø§Ù„Ø­Ù„Ù… Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</h3>
            
            <!-- Wave Pattern Canvas -->
            <canvas class="wave-pattern" width="800" height="300" style="border-radius: 10px;"></canvas>
            
            <div style="position: relative; z-index: 5; padding: 20px;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div>
                        <h4 style="color: #3b82f6; margin-bottom: 10px;">ğŸ¬ Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ:</h4>
                        <p style="background: rgba(59, 130, 246, 0.1); padding: 15px; border-radius: 10px; min-height: 80px; font-size: 0.9rem;"
                           x-text="currentDreamScene || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ù„Ù… Ù†Ø´Ø·...'"></p>
                    </div>
                    
                    <div>
                        <h4 style="color: #ec4899; margin-bottom: 10px;">ğŸ­ Ø§Ù„Ø¹ÙˆØ§Ø·Ù Ø§Ù„Ù…Ù‡ÙŠÙ…Ù†Ø©:</h4>
                        <div style="background: rgba(236, 72, 153, 0.1); padding: 15px; border-radius: 10px; min-height: 80px;">
                            <div style="display: flex; flex-wrap: wrap; gap: 5px;">
                                <span style="background: rgba(34, 197, 94, 0.3); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;" x-show="dominantEmotions.includes('joy')">ÙØ±Ø­</span>
                                <span style="background: rgba(239, 68, 68, 0.3); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;" x-show="dominantEmotions.includes('fear')">Ø®ÙˆÙ</span>
                                <span style="background: rgba(168, 85, 247, 0.3); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;" x-show="dominantEmotions.includes('wonder')">Ø¯Ù‡Ø´Ø©</span>
                                <span style="background: rgba(245, 158, 11, 0.3); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;" x-show="dominantEmotions.includes('nostalgia')">Ø­Ù†ÙŠÙ†</span>
                                <span style="background: rgba(59, 130, 246, 0.3); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;" x-show="dominantEmotions.includes('confusion')">Ø­ÙŠØ±Ø©</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 style="color: #22c55e; margin-bottom: 10px;">ğŸ”— Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…ÙƒØªØ´ÙØ©:</h4>
                        <p style="background: rgba(34, 197, 94, 0.1); padding: 15px; border-radius: 10px; min-height: 80px; font-size: 0.9rem;"
                           x-text="discoveredConnections || 'Ù„Ù… ÙŠØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø±ÙˆØ§Ø¨Ø· Ø¨Ø¹Ø¯...'"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- WebPPL Console -->
        <div class="webppl-console">
            <h3 style="margin-bottom: 15px; color: #22c55e;">ğŸ’» ÙˆØ­Ø¯Ø© ØªØ­ÙƒÙ… WebPPL & Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ÙƒÙ…</h3>
            <div style="max-height: 200px; overflow-y: auto;">
                <template x-for="(log, index) in consoleLogs" :key="index">
                    <div class="console-line" :class="log.type">
                        <span style="opacity: 0.6; margin-left: 10px;" x-text="log.timestamp"></span>
                        <span x-text="log.message"></span>
                    </div>
                </template>
            </div>
        </div>
    </div>

    <script>
        // Add wave oscillation animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes waveOscillate {
                0%, 100% { transform: translateX(0); }
                50% { transform: translateX(44px); }
            }
        `;
        document.head.appendChild(style);

        function dreamSimulator() {
            return {
                // Core Dream State
                isDreaming: false,
                sleepStage: 'Ø§Ù„Ø§Ø³ØªÙŠÙ‚Ø§Ø¸',
                dreamClarity: 0.0,
                noiseLevel: 0.1,
                
                // Cognitive Simulators
                activeSimulators: [],
                dreamContent: {
                    reality_fragments: ['Ø§Ù„Ù…Ù†Ø²Ù„', 'Ø§Ù„Ø¹Ù…Ù„', 'Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡'],
                    future_scenarios: ['Ù…ØºØ§Ù…Ø±Ø© ØºØ§Ù…Ø¶Ø©', 'Ù†Ø¬Ø§Ø­ Ø¨Ø§Ù‡Ø±'],
                    mixed_memories: 'Ø®Ù„ÙŠØ· Ù…Ù† Ø°ÙƒØ±ÙŠØ§Øª Ù…ØªÙ†ÙˆØ¹Ø© ÙˆØ®ÙŠØ§Ù„Ø§Øª',
                    pattern_discoveries: 'Ø±ÙˆØ§Ø¨Ø· Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙ…ÙØ§Ø¬Ø¦Ø©',
                    social_interactions: 'Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø®ÙŠØ§Ù„ÙŠØ© Ù…Ø¹ Ø´Ø®ØµÙŠØ§Øª Ù…Ø£Ù„ÙˆÙØ©'
                },
                
                // Wave Dynamics
                oscillators: {
                    attention: 0.5,
                    emotional: 0.3,
                    cognitive: 0.7
                },
                interferenceType: 'Ø¨Ù†Ø§Ø¡',
                coherenceStrength: 0.65,
                resonanceFrequency: 0.12,
                
                // Quantum Calculations
                quantumSuperposition: 45,
                waveInterference: 'ØªØ¯Ø§Ø®Ù„ Ø¨Ù†Ø§Ø¡',
                collapseprobability: 0.234,
                
                // Extended Memory Bank
                activeMemories: [],
                memoryBank: {
                    childhood: ['playground', 'birthday', 'grandmother', 'first_bike', 'summer_trip'],
                    teenage: ['first_love', 'graduation', 'friends_group', 'exam_stress', 'talent_show'],
                    adult: ['first_job', 'wedding', 'travel_abroad', 'achievement', 'loss'],
                    recent: ['pandemic', 'new_hobby', 'career_change', 'family_reunion', 'yesterday']
                },
                
                // Dream Scenarios
                dreamScenarios: [
                    'Ø£Ø·ÙŠØ± ÙÙˆÙ‚ Ù…Ø¯ÙŠÙ†Ø© Ù…Ø¶ÙŠØ¦Ø© Ø¨Ø£Ù„ÙˆØ§Ù† Ù‚ÙˆØ³ Ù‚Ø²Ø­',
                    'Ø£ØªØ­Ø¯Ø« Ù…Ø¹ Ù†Ø³Ø®Ø© Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© Ù…Ù† Ù†ÙØ³ÙŠ',
                    'Ø£ÙƒØªØ´Ù ØºØ±ÙØ© Ø³Ø±ÙŠØ© ÙÙŠ Ù…Ù†Ø²Ù„ Ø·ÙÙˆÙ„ØªÙŠ',
                    'Ø£Ø­ÙˆÙ„ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ø¥Ù„Ù‰ Ø°Ù‡Ø¨ Ø¨Ù„Ù…Ø³Ø© ÙŠØ¯ÙŠ',
                    'Ø£Ø³Ø§ÙØ± Ø¹Ø¨Ø± Ø§Ù„Ø²Ù…Ù† Ù„Ø£ØºÙŠØ± Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø§Ø¶ÙŠ',
                    'Ø£Ø¬Ø¯ Ù†ÙØ³ÙŠ ÙÙŠ Ù…ÙƒØªØ¨Ø© Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…Ù† Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ø·Ø§Ø¦Ø±Ø©',
                    'Ø£ØªØ­Ø¯Ø« Ø¨Ù„ØºØ§Øª Ù„Ù… Ø£ØªØ¹Ù„Ù…Ù‡Ø§ Ù…Ù† Ù‚Ø¨Ù„',
                    'Ø£Ø±Ù‚Øµ Ù…Ø¹ Ø§Ù„Ù†Ø¬ÙˆÙ… ÙÙŠ Ø§Ù„ÙØ¶Ø§Ø¡',
                    'Ø£Ø­Ù„ Ø£Ù„ØºØ§Ø² Ø±ÙŠØ§Ø¶ÙŠØ© Ù…Ø¹Ù‚Ø¯Ø© Ø¨Ø¨Ø³Ø§Ø·Ø© Ù…Ø°Ù‡Ù„Ø©',
                    'Ø£Ø±Ù‰ Ø°ÙƒØ±ÙŠØ§ØªÙŠ ÙƒØ£ÙÙ„Ø§Ù… Ø¹Ù„Ù‰ Ø´Ø§Ø´Ø© Ø¹Ù…Ù„Ø§Ù‚Ø©'
                ],
                
                // Current Dream State
                currentDreamScene: '',
                dominantEmotions: [],
                discoveredConnections: '',
                
                // Console Logs
                consoleLogs: [],
                
                // Intervals
                dreamInterval: null,
                waveInterval: null,
                quantumInterval: null,
                
                // Dream Particles
                dreamParticles: [],
                canvas: null,
                ctx: null,

                init() {
                    this.initDreamCanvas();
                    this.startQuantumCalculations();
                    this.startWaveSimulation();
                    this.addConsoleLog('system', 'ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„ÙƒÙ…ÙŠ');
                    this.addConsoleLog('probability', 'WebPPL: ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ÙŠ');
                    this.addConsoleLog('quantum', 'Quantum: ØªÙ… ØªÙØ¹ÙŠÙ„ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªØ±Ø§ÙƒØ¨ Ø§Ù„ÙƒÙ…ÙŠ');
                    
                    // Auto-activate some memories for demo
                    this.activeMemories = ['playground', 'first_love', 'wedding', 'yesterday'];
                },

                // Initialize Dream Canvas
                initDreamCanvas() {
                    this.canvas = document.getElementById('dreamCanvas');
                    this.ctx = this.canvas.getContext('2d');
                    this.canvas.width = window.innerWidth;
                    this.canvas.height = window.innerHeight;
                    
                    // Create dream particles
                    for (let i = 0; i < 100; i++) {
                        this.dreamParticles.push({
                            x: Math.random() * this.canvas.width,
                            y: Math.random() * this.canvas.height,
                            vx: (Math.random() - 0.5) * 2,
                            vy: (Math.random() - 0.5) * 2,
                            size: Math.random() * 3 + 1,
                            color: `hsl(${Math.random() * 360}, 70%, 60%)`,
                            alpha: Math.random() * 0.5 + 0.2
                        });
                    }
                    
                    this.animateDreamParticles();
                },

                // Animate dream particles
                animateDreamParticles() {
                    if (!this.ctx) return;
                    
                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                    
                    if (this.isDreaming) {
                        this.dreamParticles.forEach(particle => {
                            // Update position
                            particle.x += particle.vx;
                            particle.y += particle.vy;
                            
                            // Wrap around screen
                            if (particle.x < 0) particle.x = this.canvas.width;
                            if (particle.x > this.canvas.width) particle.x = 0;
                            if (particle.y < 0) particle.y = this.canvas.height;
                            if (particle.y > this.canvas.height) particle.y = 0;
                            
                            // Dream effect - make particles more dynamic
                            particle.vx += (Math.random() - 0.5) * 0.1;
                            particle.vy += (Math.random() - 0.5) * 0.1;
                            particle.vx = Math.max(-3, Math.min(3, particle.vx));
                            particle.vy = Math.max(-3, Math.min(3, particle.vy));
                            
                            // Draw particle
                            this.ctx.save();
                            this.ctx.globalAlpha = particle.alpha * this.dreamClarity;
                            this.ctx.fillStyle = particle.color;
                            this.ctx.beginPath();
                            this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                            this.ctx.fill();
                            this.ctx.restore();
                        });
                        
                        // Draw connections between nearby particles
                        this.ctx.save();
                        this.ctx.globalAlpha = 0.1 * this.dreamClarity;
                        this.ctx.strokeStyle = '#8b5cf6';
                        this.ctx.lineWidth = 1;
                        
                        for (let i = 0; i < this.dreamParticles.length; i++) {
                            for (let j = i + 1; j < this.dreamParticles.length; j++) {
                                const p1 = this.dreamParticles[i];
                                const p2 = this.dreamParticles[j];
                                const distance = Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);
                                
                                if (distance < 100) {
                                    this.ctx.beginPath();
                                    this.ctx.moveTo(p1.x, p1.y);
                                    this.ctx.lineTo(p2.x, p2.y);
                                    this.ctx.stroke();
                                }
                            }
                        }
                        this.ctx.restore();
                    }
                    
                    requestAnimationFrame(() => this.animateDreamParticles());
                },

                // Main dream control
                toggleDreaming() {
                    this.isDreaming = !this.isDreaming;
                    
                    if (this.isDreaming) {
                        this.startDreamCycle();
                        this.addConsoleLog('system', 'Ø¨Ø¯Ø¡ Ø¯ÙˆØ±Ø© Ø§Ù„Ø­Ù„Ù…...');
                    } else {
                        this.wakeUp();
                        this.addConsoleLog('system', 'Ø§Ù„Ø§Ø³ØªÙŠÙ‚Ø§Ø¸ Ù…Ù† Ø§Ù„Ø­Ù„Ù…');
                    }
                },

                // Start dream cycle
                startDreamCycle() {
                    this.sleepStage = 'Ù†ÙˆÙ… Ø®ÙÙŠÙ';
                    this.dreamClarity = 0.2;
                    this.addConsoleLog('wave', 'Wave: Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†ÙˆÙ… Ø§Ù„Ø®ÙÙŠÙ');
                    
                    // Light sleep phase
                    setTimeout(() => {
                        if (this.isDreaming) {
                            this.sleepStage = 'Ù†ÙˆÙ… Ø¹Ù…ÙŠÙ‚';
                            this.dreamClarity = 0.4;
                            this.activateSimulators(['reality_processor']);
                            this.addConsoleLog('probability', 'WebPPL: ØªÙØ¹ÙŠÙ„ Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„ÙˆØ§Ù‚Ø¹');
                        }
                    }, 3000);
                    
                    // Deep sleep phase
                    setTimeout(() => {
                        if (this.isDreaming) {
                            this.sleepStage = 'Ù†ÙˆÙ… Ø§Ù„Ø£Ø­Ù„Ø§Ù… (REM)';
                            this.dreamClarity = 0.8;
                            this.activateAllSimulators();
                            this.startDreamGeneration();
                            this.addConsoleLog('quantum', 'Quantum: Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø­Ù„Ø© REM - ØªÙØ¹ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙƒÙŠØ§Øª');
                            this.addConsoleLog('wave', 'Wave: Ø§Ù„ØªØ¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠ Ù†Ø´Ø·');
                        }
                    }, 6000);
                },

                // Activate simulators
                activateSimulators(simulators) {
                    this.activeSimulators = simulators;
                    this.updateDreamContent();
                    simulators.forEach(sim => {
                        this.addConsoleLog('probability', `WebPPL: ØªÙØ¹ÙŠÙ„ ${sim}`);
                    });
                },

                activateAllSimulators() {
                    this.activeSimulators = [
                        'reality_processor', 
                        'prediction_engine', 
                        'memory_reconstructor',
                        'pattern_explorer',
                        'social_modeler'
                    ];
                    this.updateDreamContent();
                    this.addConsoleLog('system', 'ØªÙØ¹ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙƒÙŠØ§Øª Ø§Ù„Ù…Ø¹Ø±ÙÙŠØ©');
                },

                // Update dream content
                updateDreamContent() {
                    if (this.activeSimulators.includes('reality_processor')) {
                        this.dreamContent.reality_fragments = ['Ø§Ù„Ø¨ÙŠØª Ø§Ù„Ù…ØªØ­ÙˆÙ„', 'Ù…ÙƒØªØ¨ Ø·Ø§Ø¦Ø±', 'Ø´Ø§Ø±Ø¹ Ù…Ù„ÙˆÙ†'];
                    }
                    if (this.activeSimulators.includes('prediction_engine')) {
                        this.dreamContent.future_scenarios = ['Ù…ØºØ§Ù…Ø±Ø© ÙØ¶Ø§Ø¦ÙŠØ©', 'Ø§ÙƒØªØ´Ø§Ù Ø¹Ø¸ÙŠÙ…', 'Ù„Ù‚Ø§Ø¡ Ø³Ø­Ø±ÙŠ'];
                    }
                    if (this.activeSimulators.includes('memory_reconstructor')) {
                        this.dreamContent.mixed_memories = 'Ù…Ø²ÙŠØ¬ Ù…Ù† Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ø·ÙÙˆÙ„Ø© ÙˆØ§Ù„Ø®ÙŠØ§Ù„ Ø§Ù„Ø¹Ù„Ù…ÙŠ';
                    }
                },

                // Start dream generation
                startDreamGeneration() {
                    this.generateNewDream();
                    
                    this.dreamInterval = setInterval(() => {
                        if (this.isDreaming && this.sleepStage === 'Ù†ÙˆÙ… Ø§Ù„Ø£Ø­Ù„Ø§Ù… (REM)') {
                            this.generateNewDream();
                            this.updateQuantumState();
                            this.updateWaveInterference();
                        }
                    }, 8000);
                },

                // Generate new dream
                generateNewDream() {
                    // Select random dream scenario
                    const randomScenario = this.dreamScenarios[Math.floor(Math.random() * this.dreamScenarios.length)];
                    
                    // Modify based on active memories
                    let modifiedScenario = randomScenario;
                    if (this.activeMemories.length > 0) {
                        const randomMemory = this.activeMemories[Math.floor(Math.random() * this.activeMemories.length)];
                        modifiedScenario += ` Ù…Ø¹ Ø¹Ù†Ø§ØµØ± Ù…Ù† ${randomMemory}`;
                    }
                    
                    this.currentDreamScene = modifiedScenario;
                    
                    // Generate emotions
                    const allEmotions = ['joy', 'fear', 'wonder', 'nostalgia', 'confusion'];
                    this.dominantEmotions = allEmotions.filter(() => Math.random() > 0.6);
                    
                    // Generate connections
                    this.discoveredConnections = this.generateConnections();
                    
                    // Update noise and clarity
                    this.noiseLevel = 0.2 + Math.random() * 0.4;
                    this.dreamClarity = 0.6 + Math.random() * 0.4;
                    
                    this.addConsoleLog('probability', `WebPPL: Ù…Ø´Ù‡Ø¯ Ø¬Ø¯ÙŠØ¯ - Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© ${(Math.random() * 0.3 + 0.7).toFixed(3)}`);
                    this.addConsoleLog('quantum', `Quantum: Ø§Ù†Ù‡ÙŠØ§Ø± Ù…ÙˆØ¬ÙŠ Ø¬Ø¯ÙŠØ¯ - ${this.currentDreamScene.substring(0, 30)}...`);
                },

                // Generate connections
                generateConnections() {
                    const connections = [
                        'Ø±Ø¨Ø· Ø¨ÙŠÙ† Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ø·ÙÙˆÙ„Ø© ÙˆØ§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©',
                        'Ø§ÙƒØªØ´Ø§Ù Ø±Ø§Ø¨Ø· Ù…Ø®ÙÙŠ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø´Ø®Ø§Øµ ÙˆØ§Ù„Ø£Ù…Ø§ÙƒÙ†',
                        'ÙÙ‡Ù… Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©',
                        'Ø±Ø¤ÙŠØ© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ù„Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„',
                        'ØªÙˆØ§ØµÙ„ Ø¹Ø§Ø·ÙÙŠ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ù…Ø¹ Ø§Ù„Ù…Ø§Ø¶ÙŠ'
                    ];
                    return connections[Math.floor(Math.random() * connections.length)];
                },

                // Memory management
                toggleMemory(memoryId) {
                    const index = this.activeMemories.indexOf(memoryId);
                    if (index > -1) {
                        this.activeMemories.splice(index, 1);
                        this.addConsoleLog('probability', `WebPPL: Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø°Ø§ÙƒØ±Ø© ${memoryId}`);
                    } else {
                        this.activeMemories.push(memoryId);
                        this.addConsoleLog('probability', `WebPPL: ØªÙØ¹ÙŠÙ„ Ø°Ø§ÙƒØ±Ø© ${memoryId}`);
                    }
                    
                    if (this.isDreaming) {
                        this.addConsoleLog('wave', `Wave: ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©`);
                    }
                },

                // Wake up
                wakeUp() {
                    this.sleepStage = 'Ø§Ù„Ø§Ø³ØªÙŠÙ‚Ø§Ø¸';
                    this.dreamClarity = 0.0;
                    this.noiseLevel = 0.1;
                    this.activeSimulators = [];
                    this.currentDreamScene = '';
                    this.dominantEmotions = [];
                    this.discoveredConnections = '';
                    
                    if (this.dreamInterval) {
                        clearInterval(this.dreamInterval);
                        this.dreamInterval = null;
                    }
                    
                    this.addConsoleLog('system', 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø­Ø§Ù„Ø© Ø§Ù„ÙŠÙ‚Ø¸Ø©');
                    this.addConsoleLog('quantum', 'Quantum: ØªÙˆÙ‚Ù Ø§Ù„ØªØ±Ø§ÙƒØ¨ Ø§Ù„ÙƒÙ…ÙŠ');
                },

                // Wave simulation
                startWaveSimulation() {
                    this.waveInterval = setInterval(() => {
                        // Update oscillators
                        this.oscillators.attention = 0.5 + 0.4 * Math.sin(Date.now() * 0.001);
                        this.oscillators.emotional = 0.5 + 0.3 * Math.sin(Date.now() * 0.0015 + 1);
                        this.oscillators.cognitive = 0.5 + 0.4 * Math.sin(Date.now() * 0.0008 + 2);
                        
                        // Calculate interference
                        this.updateWaveInterference();
                    }, 100);
                },

                // Update wave interference
                updateWaveInterference() {
                    const att = this.oscillators.attention;
                    const emo = this.oscillators.emotional;
                    const cog = this.oscillators.cognitive;
                    
                    // Calculate constructive/destructive interference
                    const avgAmplitude = (att + emo + cog) / 3;
                    const coherence = 1 - Math.abs(att - emo) - Math.abs(emo - cog) - Math.abs(cog - att);
                    
                    this.coherenceStrength = Math.max(0, Math.min(1, coherence));
                    this.resonanceFrequency = 0.05 + avgAmplitude * 0.2;
                    
                    if (coherence > 0.7) {
                        this.interferenceType = 'ØªØ²Ø§Ù…Ù†';
                    } else if (coherence > 0.4) {
                        this.interferenceType = 'Ø¨Ù†Ø§Ø¡';
                    } else if (coherence > 0.2) {
                        this.interferenceType = 'Ù…Ø®ØªÙ„Ø·';
                    } else {
                        this.interferenceType = 'Ù‡Ø¯Ø§Ù…';
                    }
                    
                    if (this.isDreaming && Math.random() > 0.95) {
                        this.addConsoleLog('wave', `Wave: ${this.interferenceType} - ØªÙ…Ø§Ø³Ùƒ ${(this.coherenceStrength * 100).toFixed(1)}%`);
                    }
                },

                // Quantum calculations
                startQuantumCalculations() {
                    this.quantumInterval = setInterval(() => {
                        // Quantum superposition calculation
                        this.quantumSuperposition = 30 + Math.sin(Date.now() * 0.002) * 20 + Math.random() * 10;
                        
                        // Wave interference pattern
                        const patterns = ['ØªØ¯Ø§Ø®Ù„ Ø¨Ù†Ø§Ø¡', 'ØªØ¯Ø§Ø®Ù„ Ù‡Ø¯Ø§Ù…', 'Ù…ÙˆØ¬Ø§Øª Ù…ØªØ²Ø§Ù…Ù†Ø©', 'ØªØ´ÙˆÙŠØ´ ÙƒÙ…ÙŠ', 'ØªØ±Ø§ÙƒØ¨ Ù…ØªØ¹Ø¯Ø¯'];
                        if (Math.random() > 0.9) {
                            this.waveInterference = patterns[Math.floor(Math.random() * patterns.length)];
                        }
                        
                        // Collapse probability
                        this.collapseprobability = 0.1 + Math.random() * 0.4 + this.coherenceStrength * 0.3;
                        
                        if (this.isDreaming && Math.random() > 0.98) {
                            this.addConsoleLog('quantum', `Quantum: ØªØ±Ø§ÙƒØ¨ ${this.quantumSuperposition.toFixed(1)}% - Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø§Ù†Ù‡ÙŠØ§Ø± ${this.collapseprobability.toFixed(3)}`);
                        }
                    }, 200);
                },

                // Console logging
                addConsoleLog(type, message) {
                    const timestamp = new Date().toLocaleTimeString('ar-SA', { 
                        hour: '2-digit', 
                        minute: '2-digit', 
                        second: '2-digit' 
                    });
                    
                    this.consoleLogs.unshift({
                        type: type,
                        message: message,
                        timestamp: timestamp
                    });
                    
                    // Keep only last 50 logs
                    if (this.consoleLogs.length > 50) {
                        this.consoleLogs = this.consoleLogs.slice(0, 50);
                    }
                },

                // Cleanup on destroy
                destroy() {
                    if (this.dreamInterval) clearInterval(this.dreamInterval);
                    if (this.waveInterval) clearInterval(this.waveInterval);
                    if (this.quantumInterval) clearInterval(this.quantumInterval);
                }
            }
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('dreamCanvas');
            if (canvas) {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
        });
    </script>
</body>
</html>