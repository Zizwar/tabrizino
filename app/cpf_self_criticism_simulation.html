<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPF: ูุญุงูุงุฉ ููู ุงูููุณ ูุขููุงุช ุงูุญูุงูุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @keyframes pulse-danger {
            0%, 100% { background-color: rgb(239 68 68); }
            50% { background-color: rgb(185 28 28); }
        }
        @keyframes ariadne-intervention {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }
        @keyframes rescue-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.5); }
            50% { box-shadow: 0 0 40px rgba(34, 197, 94, 0.8); }
        }
        .pulse-danger { animation: pulse-danger 2s infinite; }
        .ariadne-spin { animation: ariadne-intervention 3s ease-in-out; }
        .rescue-glow { animation: rescue-glow 2s infinite; }
        
        .simulator-card {
            transition: all 0.3s ease;
        }
        .simulator-overload {
            background: linear-gradient(45deg, #ef4444, #dc2626);
            animation: pulse-danger 1s infinite;
        }
        .simulator-protected {
            background: linear-gradient(45deg, #10b981, #059669);
            animation: rescue-glow 2s infinite;
        }
        
        .oscillator-danger {
            background: radial-gradient(circle, #dc2626, #7f1d1d);
        }
        .oscillator-safe {
            background: radial-gradient(circle, #10b981, #064e3b);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 min-h-screen text-white">
    <div x-data="cpfSimulation()" class="container mx-auto p-6">
        <!-- ุงูุนููุงู ูุงูุชุญุฐูุฑ -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                ๐ง ูุญุงูุงุฉ CPF: ููู ุงูููุณ ูุขููุงุช ุงูุญูุงูุฉ
            </h1>
            <div class="bg-yellow-900/50 border border-yellow-500 rounded-lg p-4 mb-6">
                <p class="text-yellow-200">
                    โ๏ธ ูุฐู ูุญุงูุงุฉ ุชุนููููุฉ ูุฅุธูุงุฑ ููู ูุญูู ุฅุทุงุฑ CPF ูู ุงูุฃููุงุท ุงูุณูุจูุฉ - ููุณ ููุงุณุชุฎุฏุงู ุงูุนูุงุฌู
                </p>
            </div>
        </div>

        <!-- ุฃุฒุฑุงุฑ ุงูุชุญูู -->
        <div class="flex justify-center gap-4 mb-8">
            <button @click="triggerSelfCriticism()" 
                    :disabled="ariadneActive"
                    class="bg-red-600 hover:bg-red-700 disabled:bg-gray-600 px-6 py-3 rounded-lg font-bold transition-all">
                ๐ฅ ูุญุงูุงุฉ ููู ุงูููุณ
            </button>
            <button @click="activateAriadne()" 
                    class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg font-bold transition-all">
                ๐ก๏ธ ุชูุนูู ุงูุฎูุท ุงูุฃุฑูุงุฏูู
            </button>
            <button @click="reset()" 
                    class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-bold transition-all">
                ๐ ุฅุนุงุฏุฉ ุชุนููู
            </button>
        </div>

        <!-- ุดุงุดุฉ ุงูุญุงูุฉ ุงูุนุงูุฉ -->
        <div class="bg-black/30 rounded-xl p-6 mb-8 border-2" 
             :class="systemStatus === 'danger' ? 'border-red-500' : systemStatus === 'protected' ? 'border-green-500' : 'border-gray-500'">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-2xl font-bold">๐ ุญุงูุฉ ุงููุธุงู</h2>
                <div class="text-4xl" x-text="getSystemEmoji()"></div>
            </div>
            <div class="grid grid-cols-3 gap-4">
                <div class="text-center">
                    <div class="text-sm text-gray-400">ูุณุชูู ุงูุฎุทุฑ</div>
                    <div class="text-2xl font-bold" 
                         :class="dangerLevel > 0.8 ? 'text-red-400' : dangerLevel > 0.5 ? 'text-yellow-400' : 'text-green-400'"
                         x-text="(dangerLevel * 100).toFixed(0) + '%'"></div>
                </div>
                <div class="text-center">
                    <div class="text-sm text-gray-400">ุงูุฎูุท ุงูุฃุฑูุงุฏูู</div>
                    <div class="text-2xl" x-text="ariadneActive ? '๐ข ูุดุท' : '๐ด ุบูุฑ ูุดุท'"></div>
                </div>
                <div class="text-center">
                    <div class="text-sm text-gray-400">ุงูุชุฏุฎูุงุช</div>
                    <div class="text-2xl font-bold text-blue-400" x-text="interventionCount"></div>
                </div>
            </div>
        </div>

        <!-- ุงููุฒุงุฒุงุช (Oscillators) -->
        <div class="mb-8">
            <h3 class="text-xl font-bold mb-4">๐ ุฃููุงุท ุงูุชุฐุจุฐุจ ุงููุนุฑูู</h3>
            <div class="grid grid-cols-3 gap-4">
                <div class="bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg p-4 text-center relative overflow-hidden">
                    <div class="absolute inset-0 opacity-30"
                         :class="oscillators.baseline > 0.9 ? 'oscillator-danger' : oscillators.baseline < 0.1 ? 'oscillator-danger' : ''"></div>
                    <h4 class="font-bold mb-2">โ๏ธ ุงููุฒุงุฒ ุงูุฃุณุงุณู</h4>
                    <div class="text-3xl font-bold" x-text="oscillators.baseline.toFixed(2)"></div>
                    <div class="w-full bg-gray-700 rounded-full h-2 mt-2">
                        <div class="bg-blue-400 h-2 rounded-full transition-all duration-500"
                             :style="`width: ${oscillators.baseline * 100}%`"></div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-purple-600 to-purple-800 rounded-lg p-4 text-center relative overflow-hidden">
                    <div class="absolute inset-0 opacity-30"
                         :class="oscillators.dynamic > 0.9 ? 'oscillator-danger' : oscillators.dynamic < 0.1 ? 'oscillator-danger' : ''"></div>
                    <h4 class="font-bold mb-2">โก ุงููุฒุงุฒ ุงูุฏููุงูููู</h4>
                    <div class="text-3xl font-bold" x-text="oscillators.dynamic.toFixed(2)"></div>
                    <div class="w-full bg-gray-700 rounded-full h-2 mt-2">
                        <div class="bg-purple-400 h-2 rounded-full transition-all duration-500"
                             :style="`width: ${oscillators.dynamic * 100}%`"></div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-green-600 to-green-800 rounded-lg p-4 text-center relative overflow-hidden">
                    <div class="absolute inset-0 opacity-30"
                         :class="oscillators.integration > 0.9 ? 'oscillator-danger' : oscillators.integration < 0.1 ? 'oscillator-danger' : ''"></div>
                    <h4 class="font-bold mb-2">๐ ูุฒุงุฒ ุงูุชูุงูู</h4>
                    <div class="text-3xl font-bold" x-text="oscillators.integration.toFixed(2)"></div>
                    <div class="w-full bg-gray-700 rounded-full h-2 mt-2">
                        <div class="bg-green-400 h-2 rounded-full transition-all duration-500"
                             :style="`width: ${oscillators.integration * 100}%`"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ุงููุญุงููุงุช -->
        <div class="mb-8">
            <h3 class="text-xl font-bold mb-4">๐ค ุงููุญุงููุงุช ุงููุชูุงุฒูุฉ</h3>
            <div class="grid grid-cols-2 lg:grid-cols-3 gap-4">
                <template x-for="(simulator, name) in simulators" :key="name">
                    <div class="simulator-card rounded-lg p-4 text-center transition-all duration-500"
                         :class="simulator.overloaded ? 'simulator-overload' : simulator.protected ? 'simulator-protected' : 'bg-gray-700'">
                        <div class="text-3xl mb-2" x-text="simulator.icon"></div>
                        <h4 class="font-bold mb-2" x-text="simulator.name"></h4>
                        <div class="text-sm mb-2" x-text="simulator.status"></div>
                        <div class="w-full bg-gray-800 rounded-full h-2">
                            <div class="h-2 rounded-full transition-all duration-500"
                                 :class="simulator.overloaded ? 'bg-red-400' : simulator.protected ? 'bg-green-400' : 'bg-blue-400'"
                                 :style="`width: ${simulator.load * 100}%`"></div>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <!-- ุงูุฎูุท ุงูุฃุฑูุงุฏูู -->
        <div class="mb-8">
            <h3 class="text-xl font-bold mb-4">๐งต ุงูุฎูุท ุงูุฃุฑูุงุฏูู - ูุธุงู ุงูุญูุงูุฉ</h3>
            <div class="bg-gradient-to-r from-green-900 to-blue-900 rounded-xl p-6 relative overflow-hidden">
                <div class="absolute inset-0 opacity-20"
                     :class="ariadneActive ? 'rescue-glow' : ''"></div>
                <div class="flex items-center justify-between relative z-10">
                    <div>
                        <h4 class="text-2xl font-bold mb-2">๐ก๏ธ ุญุงูุฉ ุงูุญูุงูุฉ</h4>
                        <p class="text-lg" x-text="ariadneStatus"></p>
                    </div>
                    <div class="text-8xl transition-all duration-500"
                         :class="ariadneActive ? 'ariadne-spin' : ''"
                         x-text="ariadneActive ? '๐' : '๐ด'"></div>
                </div>
                
                <div class="mt-4 grid grid-cols-4 gap-4 text-center">
                    <div>
                        <div class="text-sm text-gray-400">ูุณุชูู ุงูุชุฏุฎู</div>
                        <div class="font-bold" x-text="interventionLevel"></div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-400">ููุฉ ุงูุณุญุจ</div>
                        <div class="font-bold" x-text="(pullStrength * 100).toFixed(0) + '%'"></div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-400">ูุฑุงุณู ุงููุงูุน</div>
                        <div class="font-bold" x-text="realityAnchors"></div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-400">ุญุงูุฉ ุงูุฃูุงู</div>
                        <div class="font-bold" x-text="safetyStatus"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ุณุฌู ุงูุฃุญุฏุงุซ -->
        <div class="mb-8">
            <h3 class="text-xl font-bold mb-4">๐ ุณุฌู ุงูุฃุญุฏุงุซ</h3>
            <div class="bg-black/40 rounded-lg p-4 h-64 overflow-y-auto">
                <template x-for="event in eventLog.slice().reverse()" :key="event.id">
                    <div class="mb-2 p-2 rounded"
                         :class="event.type === 'danger' ? 'bg-red-900/50' : event.type === 'intervention' ? 'bg-green-900/50' : 'bg-blue-900/50'">
                        <span class="text-xs text-gray-400" x-text="event.timestamp"></span>
                        <div x-text="event.message"></div>
                    </div>
                </template>
            </div>
        </div>

        <!-- ูุนูููุงุช ุงูุชุนููู -->
        <div class="bg-blue-900/30 rounded-xl p-6 border border-blue-500">
            <h3 class="text-xl font-bold mb-4">๐ ููู ูุนูู CPF ูู ููุงุฌูุฉ ููู ุงูููุณ</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-bold mb-2">๐ ุขููุงุช ุงููุดู:</h4>
                    <ul class="text-sm space-y-1">
                        <li>โข ุงููุฒุงุฒุงุช ุชุฑุงูุจ ุงูุญุงูุงุช ุงููุตูู</li>
                        <li>โข ุงููุญุงููุงุช ุชูุชุดู ุงูุฃููุงุท ุงูุณูุจูุฉ</li>
                        <li>โข ุชุญููู ุงูุชูุฑุงุฑ ูุงูุดุฏุฉ</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-2">๐ก๏ธ ุขููุงุช ุงูุญูุงูุฉ:</h4>
                    <ul class="text-sm space-y-1">
                        <li>โข ุชุฏุฎู ุงูุฎูุท ุงูุฃุฑูุงุฏูู ุงูููุฑู</li>
                        <li>โข ุฅุนุงุฏุฉ ุชูุฌูู ุงูุงูุชุจุงู ูููุงูุน</li>
                        <li>โข ุชูุนูู ุงูุถูุถุงุก ุงูุฅุจุฏุงุนูุฉ ููุณุฑ ุงูุญููุงุช</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        function cpfSimulation() {
            return {
                dangerLevel: 0.2,
                systemStatus: 'normal', // normal, danger, protected
                ariadneActive: false,
                interventionCount: 0,
                interventionLevel: 'ูุฑุงูุจุฉ',
                pullStrength: 0,
                realityAnchors: 3,
                safetyStatus: 'ุขูู',
                ariadneStatus: 'ูู ูุถุน ุงูุงุณุชุนุฏุงุฏ',
                
                oscillators: {
                    baseline: 0.5,
                    dynamic: 0.5,
                    integration: 0.5
                },
                
                simulators: {
                    reality: {
                        name: 'ูุนุงูุฌ ุงููุงูุน',
                        icon: '๐',
                        load: 0.3,
                        status: 'ุนุงุฏู',
                        overloaded: false,
                        protected: false
                    },
                    prediction: {
                        name: 'ูุญุฑู ุงูุชูุจุค',
                        icon: '๐ฎ',
                        load: 0.4,
                        status: 'ุนุงุฏู',
                        overloaded: false,
                        protected: false
                    },
                    memory: {
                        name: 'ููุนูุฏ ุงูุจูุงุก',
                        icon: '๐ญ',
                        load: 0.2,
                        status: 'ุนุงุฏู',
                        overloaded: false,
                        protected: false
                    },
                    social: {
                        name: 'ุงูููุฐุฌุฉ ุงูุงุฌุชูุงุนูุฉ',
                        icon: '๐ฅ',
                        load: 0.5,
                        status: 'ุนุงุฏู',
                        overloaded: false,
                        protected: false
                    },
                    pattern: {
                        name: 'ูุณุชูุดู ุงูุฃููุงุท',
                        icon: '๐งฉ',
                        load: 0.3,
                        status: 'ุนุงุฏู',
                        overloaded: false,
                        protected: false
                    },
                    monitor: {
                        name: 'ูุฑุงูุจ ุงููุธุงู',
                        icon: '๐',
                        load: 0.4,
                        status: 'ุนุงุฏู',
                        overloaded: false,
                        protected: false
                    }
                },
                
                eventLog: [],
                
                init() {
                    this.addEvent('info', 'ุชู ุชููุฆุฉ ูุธุงู CPF ุจูุฌุงุญ');
                },
                
                triggerSelfCriticism() {
                    this.addEvent('danger', '๐จ ุชู ุงูุชุดุงู ููุท ููู ุงูููุณ ุงููุฏูุฑ');
                    
                    // ูุญุงูุงุฉ ุชุตุงุนุฏ ุงูุฎุทุฑ
                    this.dangerLevel = 0.9;
                    this.systemStatus = 'danger';
                    
                    // ุชุฃุซูุฑ ุนูู ุงููุฒุงุฒุงุช
                    this.oscillators.dynamic = 0.05; // ุงูููุงุฑ
                    this.oscillators.integration = 0.95; // ุชูุชุฑ ุดุฏูุฏ
                    
                    // ุฅุฑูุงู ุงููุญุงููุงุช
                    Object.keys(this.simulators).forEach(key => {
                        this.simulators[key].load = 0.95;
                        this.simulators[key].status = 'ููุฑูู';
                        this.simulators[key].overloaded = true;
                    });
                    
                    // ุงููุญุงููุงุช ุงูุฃูุซุฑ ุชุถุฑุฑุงู
                    this.simulators.memory.load = 1.0;
                    this.simulators.social.load = 1.0;
                    
                    this.addEvent('danger', 'ุงููุญุงููุงุช ูู ุญุงูุฉ ุฅุฑูุงู ุดุฏูุฏ');
                    this.addEvent('danger', 'ุงููุฒุงุฒุงุช ุชุธูุฑ ูุฑุงุกุงุช ุฎุทุฑุฉ');
                    
                    // ุชูุนูู ุงูุฎูุท ุงูุฃุฑูุงุฏูู ุชููุงุฆูุงู ุจุนุฏ ุซุงููุชูู
                    setTimeout(() => {
                        if (this.dangerLevel > 0.8) {
                            this.activateAriadne();
                        }
                    }, 2000);
                },
                
                activateAriadne() {
                    if (this.ariadneActive) return;
                    
                    this.ariadneActive = true;
                    this.interventionCount++;
                    this.addEvent('intervention', '๐ก๏ธ ุชู ุชูุนูู ุงูุฎูุท ุงูุฃุฑูุงุฏูู');
                    
                    // ุชุญุฏูุฏ ูุณุชูู ุงูุชุฏุฎู
                    if (this.dangerLevel > 0.8) {
                        this.interventionLevel = 'ุฎุฑูุฌ ุทุงุฑุฆ';
                        this.pullStrength = 1.0;
                        this.addEvent('intervention', '๐จ ุชู ุชูุนูู ุจุฑูุชูููู ุงูุฎุฑูุฌ ุงูุทุงุฑุฆ');
                    } else if (this.dangerLevel > 0.6) {
                        this.interventionLevel = 'ุณุญุจ ููู';
                        this.pullStrength = 0.8;
                    } else {
                        this.interventionLevel = 'ุณุญุจ ูุทูู';
                        this.pullStrength = 0.4;
                    }
                    
                    this.ariadneStatus = 'ูุทุจู ุงูุชุฏุฎู ุงูููุงุฆู';
                    this.realityAnchors = 8;
                    
                    // ูุญุงูุงุฉ ุนูููุฉ ุงูุฅููุงุฐ
                    this.rescueSequence();
                },
                
                rescueSequence() {
                    const steps = [
                        { delay: 500, action: () => {
                            this.addEvent('intervention', '๐ ูุญุต ุดุงูู ูุญุงูุฉ ุงููุญุงููุงุช');
                        }},
                        { delay: 1000, action: () => {
                            this.addEvent('intervention', 'โก ุชุทุจูู ุงูุถูุถุงุก ุงูููุงุฆูุฉ ููุณุฑ ุงูุญููุงุช ุงูุณูุจูุฉ');
                            this.oscillators.dynamic = 0.3; // ุชุญุณู ุชุฏุฑูุฌู
                        }},
                        { delay: 1500, action: () => {
                            this.addEvent('intervention', '๐ ุชูุนูู ูุฑุงุณู ุงููุงูุน ุงูุญุณูุฉ');
                            this.realityAnchors = 12;
                        }},
                        { delay: 2000, action: () => {
                            this.addEvent('intervention', '๐ ุชุทุจูู ุญูุงูุฉ ุงููุญุงููุงุช');
                            Object.keys(this.simulators).forEach(key => {
                                this.simulators[key].protected = true;
                                this.simulators[key].overloaded = false;
                                this.simulators[key].load = Math.max(0.3, this.simulators[key].load - 0.5);
                                this.simulators[key].status = 'ูุญูู';
                            });
                        }},
                        { delay: 2500, action: () => {
                            this.addEvent('intervention', '๐ ุฅุนุงุฏุฉ ุชูุงุฒู ุงููุฒุงุฒุงุช');
                            this.oscillators.baseline = 0.6;
                            this.oscillators.integration = 0.5;
                        }},
                        { delay: 3000, action: () => {
                            this.dangerLevel = 0.2;
                            this.systemStatus = 'protected';
                            this.safetyStatus = 'ูุญูู';
                            this.ariadneStatus = 'ูุฑุงูุจุฉ ููุงุฆูุฉ ูุดุทุฉ';
                            this.addEvent('intervention', 'โ ุชู ุงุณุชุนุงุฏุฉ ุงูุงุณุชูุฑุงุฑ ุจูุฌุงุญ');
                        }}
                    ];
                    
                    steps.forEach(step => {
                        setTimeout(step.action, step.delay);
                    });
        