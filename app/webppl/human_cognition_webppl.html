<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø¥Ø¯Ø±Ø§Ùƒ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠ - CPF Lite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/webppl@0.9.15/webppl.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@200;400;600;700;900&display=swap');
        body { font-family: 'Cairo', sans-serif; }
        
        .neural-pulse { animation: neuralPulse 2s ease-in-out infinite; }
        @keyframes neuralPulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }
        
        .memory-reconstruct { animation: memoryWave 3s ease-in-out infinite; }
        @keyframes memoryWave {
            0%, 100% { background: linear-gradient(45deg, #3B82F6, #8B5CF6); }
            50% { background: linear-gradient(45deg, #8B5CF6, #EC4899); }
        }
        
        .collapse-animation { animation: collapse 1s ease-out; }
        @keyframes collapse {
            0% { opacity: 0.3; transform: scale(1.2) rotate(5deg); }
            100% { opacity: 1; transform: scale(1) rotate(0deg); }
        }
        
        .webppl-highlight { 
            background: linear-gradient(45deg, #10B981, #3B82F6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 min-h-screen text-white">
    
    <div x-data="humanCognitionCPF()" class="container mx-auto px-4 py-6">
        
        <!-- Header -->
        <header class="text-center mb-6">
            <h1 class="text-5xl font-bold mb-3 bg-gradient-to-r from-yellow-300 via-pink-300 to-purple-300 bg-clip-text text-transparent">
                ğŸ§  Human Cognition Simulator
            </h1>
            <h2 class="text-3xl font-bold mb-3 text-purple-200">
                Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø¥Ø¯Ø±Ø§Ùƒ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠ
            </h2>
            <p class="text-lg text-blue-200 mb-2">CPF~ Lite Framework with Real WebPPL Computing</p>
            <p class="text-lg text-blue-200 mb-4">Ø¥Ø·Ø§Ø± CPF~ Lite Ù…Ø¹ Ø­Ø³Ø§Ø¨Ø§Øª WebPPL Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</p>
            
            <div class="bg-gradient-to-r from-green-500/20 to-blue-500/20 backdrop-blur-md rounded-xl p-4 max-w-4xl mx-auto border border-white/30">
                <div class="flex items-center justify-center mb-2">
                    <i class="fas fa-code mr-3 text-green-400"></i>
                    <span class="webppl-highlight text-xl font-bold">Real WebPPL Probabilistic Computing</span>
                    <i class="fas fa-brain ml-3 text-blue-400"></i>
                </div>
                <p class="text-sm text-gray-200">
                    Experience true probabilistic cognition - Same input, contextually appropriate variations
                </p>
                <p class="text-sm text-gray-200">
                    Ø§Ø®ØªØ¨Ø± Ø§Ù„Ø¥Ø¯Ø±Ø§Ùƒ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ - Ù†ÙØ³ Ø§Ù„Ù…Ø¯Ø®Ù„ØŒ ØªÙ†ÙˆØ¹Ø§Øª Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø³ÙŠØ§Ù‚
                </p>
            </div>
        </header>

        <!-- Warning Banner -->
        <div class="bg-red-900/30 border-2 border-red-500 rounded-xl p-4 mb-6 max-w-6xl mx-auto">
            <div class="flex items-center justify-center mb-2">
                <i class="fas fa-exclamation-triangle text-yellow-400 text-2xl mr-3"></i>
                <h3 class="text-xl font-bold text-red-300">Research & Educational Use Only</h3>
                <i class="fas fa-exclamation-triangle text-yellow-400 text-2xl ml-3"></i>
            </div>
            <div class="text-center text-sm space-y-1">
                <p class="text-red-200">âš ï¸ NOT for medical diagnosis, therapy, or personal decision-making</p>
                <p class="text-red-200">âš ï¸ Ù„ÙŠØ³ Ù„Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø·Ø¨ÙŠ Ø£Ùˆ Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø£Ùˆ Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</p>
                <p class="text-red-200">ğŸ”¬ Theoretical cognitive modeling for research and education only</p>
                <p class="text-red-200">ğŸ”¬ Ù†Ù…Ø°Ø¬Ø© Ù…Ø¹Ø±ÙÙŠØ© Ù†Ø¸Ø±ÙŠØ© Ù„Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ… ÙÙ‚Ø·</p>
            </div>
        </div>

        <!-- Control Panels -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8">
            
            <!-- Human State Controls -->
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 border border-white/20">
                <h3 class="text-lg font-bold mb-4 text-center flex items-center justify-center">
                    <i class="fas fa-user-circle mr-2"></i>
                    Human State / Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ©
                </h3>
                
                <!-- Current Mood -->
                <div class="mb-4">
                    <label class="text-sm font-semibold block mb-2">Current Mood / Ø§Ù„Ù…Ø²Ø§Ø¬ Ø§Ù„Ø­Ø§Ù„ÙŠ</label>
                    
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-xs">Joy / ÙØ±Ø­</span>
                            <input type="range" min="0" max="1" step="0.1" x-model.number="humanState.mood.joy" 
                                   class="flex-1 mx-2 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span class="text-xs w-8" x-text="humanState.mood.joy.toFixed(1)"></span>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-xs">Despair / ÙŠØ£Ø³</span>
                            <input type="range" min="0" max="1" step="0.1" x-model.number="humanState.mood.despair" 
                                   class="flex-1 mx-2 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span class="text-xs w-8" x-text="humanState.mood.despair.toFixed(1)"></span>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-xs">Clarity / ÙˆØ¶ÙˆØ­</span>
                            <input type="range" min="0" max="1" step="0.1" x-model.number="humanState.mood.clarity" 
                                   class="flex-1 mx-2 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span class="text-xs w-8" x-text="humanState.mood.clarity.toFixed(1)"></span>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-xs">Anxiety / Ù‚Ù„Ù‚</span>
                            <input type="range" min="0" max="1" step="0.1" x-model.number="humanState.mood.anxiety" 
                                   class="flex-1 mx-2 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span class="text-xs w-8" x-text="humanState.mood.anxiety.toFixed(1)"></span>
                        </div>
                    </div>
                </div>
                
                <!-- Cognitive State -->
                <div class="mb-4">
                    <label class="text-sm font-semibold block mb-2">Cognitive State / Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø±ÙÙŠØ©</label>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-xs">Energy / Ø·Ø§Ù‚Ø©</span>
                            <input type="range" min="0" max="1" step="0.1" x-model.number="humanState.cognitive.energy" 
                                   class="flex-1 mx-2 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span class="text-xs w-8" x-text="humanState.cognitive.energy.toFixed(1)"></span>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-xs">Focus / ØªØ±ÙƒÙŠØ²</span>
                            <input type="range" min="0" max="1" step="0.1" x-model.number="humanState.cognitive.focus" 
                                   class="flex-1 mx-2 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span class="text-xs w-8" x-text="humanState.cognitive.focus.toFixed(1)"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Context Controls -->
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 border border-white/20">
                <h3 class="text-lg font-bold mb-4 text-center flex items-center justify-center">
                    <i class="fas fa-sitemap mr-2"></i>
                    Context / Ø§Ù„Ø³ÙŠØ§Ù‚
                </h3>
                
                <div class="space-y-3">
                    <div>
                        <label class="text-sm font-semibold block mb-1">Time Pressure / Ø¶ØºØ· Ø§Ù„ÙˆÙ‚Øª</label>
                        <input type="range" min="0" max="1" step="0.1" x-model.number="context.timePressure" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="text-xs text-center mt-1" x-text="`${(context.timePressure * 100).toFixed(0)}%`"></div>
                    </div>
                    
                    <div>
                        <label class="text-sm font-semibold block mb-1">Social Pressure / Ø¶ØºØ· Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</label>
                        <input type="range" min="0" max="1" step="0.1" x-model.number="context.socialPressure" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="text-xs text-center mt-1" x-text="`${(context.socialPressure * 100).toFixed(0)}%`"></div>
                    </div>
                    
                    <div>
                        <label class="text-sm font-semibold block mb-1">Information Completeness / Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</label>
                        <input type="range" min="0" max="1" step="0.1" x-model.number="context.informationCompleteness" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="text-xs text-center mt-1" x-text="`${(context.informationCompleteness * 100).toFixed(0)}%`"></div>
                    </div>
                    
                    <div>
                        <label class="text-sm font-semibold block mb-1">Stakes Level / Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø±</label>
                        <input type="range" min="0" max="1" step="0.1" x-model.number="context.stakesLevel" 
                               class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="text-xs text-center mt-1" x-text="`${(context.stakesLevel * 100).toFixed(0)}%`"></div>
                    </div>
                </div>
            </div>

            <!-- Scenario Selection -->
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 border border-white/20">
                <h3 class="text-lg font-bold mb-4 text-center flex items-center justify-center">
                    <i class="fas fa-theater-masks mr-2"></i>
                    Scenarios / Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª
                </h3>
                
                <div class="space-y-3">
                    <template x-for="(scenario, key) in scenarios" :key="key">
                        <button @click="selectedScenario = key" 
                                class="w-full p-3 rounded-lg border transition-all duration-300 text-sm"
                                :class="selectedScenario === key ? 'bg-blue-600 border-blue-400' : 'bg-white/5 border-white/20 hover:bg-white/10'">
                            <div class="font-bold" x-text="scenario.nameEn"></div>
                            <div class="text-xs opacity-75" x-text="scenario.nameAr"></div>
                        </button>
                    </template>
                </div>
                
                <div class="mt-4 text-xs text-gray-300" x-show="selectedScenario">
                    <div class="font-semibold mb-1">Current Scenario:</div>
                    <div x-text="scenarios[selectedScenario]?.descriptionEn"></div>
                    <div x-text="scenarios[selectedScenario]?.descriptionAr"></div>
                </div>
            </div>

            <!-- Actions -->
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-5 border border-white/20">
                <h3 class="text-lg font-bold mb-4 text-center flex items-center justify-center">
                    <i class="fas fa-cogs mr-2"></i>
                    Actions / Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª
                </h3>
                
                <div class="space-y-3">
                    <button @click="processMemoryReconstruction()" 
                            :disabled="isProcessing"
                            class="w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 px-4 py-3 rounded-lg font-bold transition-all duration-300 hover:scale-105 disabled:scale-100">
                        <i class="fas fa-memory mr-2"></i>
                        <div class="text-sm">Memory Recall</div>
                        <div class="text-xs">Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø°Ø§ÙƒØ±Ø©</div>
                    </button>
                    
                    <button @click="processDecisionCollapse()" 
                            :disabled="isProcessing"
                            class="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 px-4 py-3 rounded-lg font-bold transition-all duration-300 hover:scale-105 disabled:scale-100">
                        <i class="fas fa-sitemap mr-2"></i>
                        <div class="text-sm">Decision Making</div>
                        <div class="text-xs">Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±</div>
                    </button>
                    
                    <button @click="runMultipleVariations()" 
                            :disabled="isProcessing"
                            class="w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 px-4 py-3 rounded-lg font-bold transition-all duration-300 hover:scale-105 disabled:scale-100">
                        <i class="fas fa-sync mr-2"></i>
                        <div class="text-sm">5x Variations</div>
                        <div class="text-xs">5 ØªÙ†ÙˆÙŠØ¹Ø§Øª</div>
                    </button>
                    
                    <button @click="resetSystem()" 
                            class="w-full bg-red-600 hover:bg-red-700 px-4 py-3 rounded-lg font-bold transition-all duration-300 hover:scale-105">
                        <i class="fas fa-refresh mr-2"></i>
                        <div class="text-sm">Reset</div>
                        <div class="text-xs">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</div>
                    </button>
                </div>
                
                <div x-show="isProcessing" class="mt-4 text-center">
                    <div class="neural-pulse text-2xl">ğŸ§ </div>
                    <div class="text-xs text-blue-300">Processing...</div>
                </div>
            </div>
        </div>

        <!-- Results Display -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            
            <!-- Current Result -->
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20">
                <h3 class="text-xl font-bold mb-4 text-center flex items-center justify-center">
                    <i class="fas fa-brain mr-3"></i>
                    Current Result / Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                </h3>
                
                <div x-show="currentResult" class="space-y-4">
                    <!-- Result Type -->
                    <div class="bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-lg p-4 border border-blue-400/30">
                        <h4 class="font-bold text-lg mb-2 flex items-center">
                            <i class="fas fa-tag mr-2 text-blue-400"></i>
                            <span x-text="currentResult?.type || 'Unknown'"></span>
                        </h4>
                        <div class="text-sm text-gray-200" x-text="currentResult?.description || 'No description'"></div>
                    </div>
                    
                    <!-- WebPPL Computation -->
                    <div class="bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-lg p-4 border border-green-400/30">
                        <h4 class="font-bold mb-2 flex items-center">
                            <i class="fas fa-calculator mr-2 text-green-400"></i>
                            WebPPL Computation / Ø­Ø³Ø§Ø¨ WebPPL
                        </h4>
                        <div class="text-xs space-y-1">
                            <div>Confidence: <span class="webppl-highlight font-bold" x-text="`${((currentResult?.confidence || 0) * 100).toFixed(1)}%`"></span></div>
                            <div>Variation Score: <span class="webppl-highlight font-bold" x-text="`${((currentResult?.variation || 0) * 100).toFixed(1)}%`"></span></div>
                            <div>Coherence: <span class="webppl-highlight font-bold" x-text="`${((currentResult?.coherence || 0) * 100).toFixed(1)}%`"></span></div>
                        </div>
                    </div>
                    
                    <!-- Content -->
                    <div class="bg-white/5 rounded-lg p-4" x-show="currentResult?.content">
                        <h4 class="font-bold mb-2 flex items-center">
                            <i class="fas fa-quote-left mr-2 text-yellow-400"></i>
                            Content / Ø§Ù„Ù…Ø­ØªÙˆÙ‰
                        </h4>
                        <div class="text-sm text-emerald-200 leading-relaxed" x-text="currentResult?.content"></div>
                    </div>
                    
                    <!-- Probabilistic Details -->
                    <div class="bg-white/5 rounded-lg p-4" x-show="currentResult?.probabilisticDetails">
                        <h4 class="font-bold mb-2 flex items-center">
                            <i class="fas fa-chart-line mr-2 text-purple-400"></i>
                            Probabilistic Analysis / Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ÙŠ
                        </h4>
                        <div class="text-xs space-y-1">
                            <template x-for="detail in (currentResult?.probabilisticDetails || [])" :key="detail">
                                <div class="text-gray-300" x-text="detail"></div>
                            </template>
                        </div>
                    </div>
                </div>
                
                <div x-show="!currentResult" class="text-center text-gray-400 py-12">
                    <i class="fas fa-brain text-6xl mb-4 opacity-30"></i>
                    <p class="text-lg">Select a scenario and run processing</p>
                    <p class="text-sm">Ø§Ø®ØªØ± Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ ÙˆØ´ØºÙ„ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</p>
                </div>
            </div>

            <!-- Variations History -->
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20">
                <h3 class="text-xl font-bold mb-4 text-center flex items-center justify-center">
                    <i class="fas fa-history mr-3"></i>
                    Variations / Ø§Ù„ØªÙ†ÙˆÙŠØ¹Ø§Øª
                </h3>
                
                <div x-show="resultHistory.length > 0" class="space-y-3 max-h-96 overflow-y-auto">
                    <template x-for="(result, index) in resultHistory" :key="index">
                        <div class="bg-white/5 rounded-lg p-3 border-l-4 transition-all duration-300 hover:bg-white/10"
                             :class="index === 0 ? 'border-yellow-400' : 'border-gray-500'">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-sm font-semibold" 
                                      x-text="`Run #${resultHistory.length - index} - ${result.type}`"></span>
                                <span class="text-xs text-gray-300" x-text="result.timestamp"></span>
                            </div>
                            
                            <div class="text-xs text-emerald-200 mb-2 line-clamp-2" x-text="result.content"></div>
                            
                            <div class="flex space-x-2 space-x-reverse">
                                <span class="text-xs bg-blue-500/30 px-2 py-1 rounded" 
                                      x-text="`Conf: ${(result.confidence * 100).toFixed(0)}%`"></span>
                                <span class="text-xs bg-purple-500/30 px-2 py-1 rounded" 
                                      x-text="`Var: ${(result.variation * 100).toFixed(0)}%`"></span>
                                <span class="text-xs bg-green-500/30 px-2 py-1 rounded" 
                                      x-text="`Coh: ${(result.coherence * 100).toFixed(0)}%`"></span>
                            </div>
                        </div>
                    </template>
                </div>
                
                <div x-show="resultHistory.length === 0" class="text-center text-gray-400 py-12">
                    <i class="fas fa-chart-bar text-6xl mb-4 opacity-30"></i>
                    <p class="text-lg">Run multiple variations to see differences</p>
                    <p class="text-sm">Ø´ØºÙ„ ØªÙ†ÙˆÙŠØ¹Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø§Ø®ØªÙ„Ø§ÙØ§Øª</p>
                </div>
                
                <!-- Variation Analysis -->
                <div x-show="resultHistory.length > 1" class="mt-4 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-lg p-4 border border-purple-400/30">
                    <h4 class="font-bold mb-2 text-center">Variation Analysis / ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ†ÙˆÙŠØ¹</h4>
                    <div class="text-xs space-y-1">
                        <div>Unique results: <span x-text="getUniqueResultsCount()"></span>/<span x-text="resultHistory.length"></span></div>
                        <div>Average confidence: <span x-text="`${getAverageConfidence().toFixed(1)}%`"></span></div>
                        <div>Variation diversity: <span x-text="getVariationDiversity()"></span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- WebPPL Code Display -->
        <div class="bg-black/20 backdrop-blur-md rounded-xl p-6 mb-8 border border-white/20">
            <h3 class="text-xl font-bold mb-4 text-center flex items-center justify-center">
                <i class="fas fa-code mr-3 text-green-400"></i>
                Live WebPPL Code / ÙƒÙˆØ¯ WebPPL Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
            </h3>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-bold mb-2 text-blue-300">Current WebPPL Program:</h4>
                    <div class="bg-black/40 rounded-lg p-4 font-mono text-sm text-green-300 h-64 overflow-y-auto">
                        <pre x-text="currentWebPPLCode || 'No code generated yet...'"></pre>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-bold mb-2 text-purple-300">Execution Log:</h4>
                    <div id="webpplLog" class="bg-black/40 rounded-lg p-4 font-mono text-sm text-yellow-300 h-64 overflow-y-auto">
                        <div>CPF~ Lite Human Cognition Simulator Loaded</div>
                        <div>WebPPL Engine Ready</div>
                        <div>Probabilistic Computing Active</div>
                        <div>Ù†Ø¸Ø§Ù… CPF~ Lite Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ©</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Developers Credit -->
        <div class="bg-gradient-to-r from-indigo-900/50 to-purple-900/50 backdrop-blur-md rounded-xl p-6 border border-white/20 text-center">
            <h3 class="text-xl font-bold mb-3 flex items-center justify-center">
                <i class="fas fa-users mr-3 text-yellow-400"></i>
                Framework Developers / Ù…Ø·ÙˆØ±ÙŠ Ø§Ù„Ø¥Ø·Ø§Ø±
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white/10 rounded-lg p-4">
                    <div class="text-2xl mb-2">ğŸ‘¨â€ğŸ’»</div>
                    <h4 class="font-bold text-lg text-blue-300">Ibrahim Al-Bidi</h4>
                    <h4 class="font-bold text-lg text-blue-300">Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ø¨ÙŠØ¯ÙŠ</h4>
                    <p class="text-sm text-gray-300">CPF Framework Architect</p>
                    <p class="text-sm text-gray-300">Ù…Ù‡Ù†Ø¯Ø³ Ø¥Ø·Ø§Ø± CPF</p>
                    <p class="text-xs text-gray-400 mt-2">Theoretical Foundation & Vision</p>
                </div>
                
                <div class="bg-white/10 rounded-lg p-4">
                    <div class="text-2xl mb-2">ğŸ¤–</div>
                    <h4 class="font-bold text-lg text-purple-300">Claude (Anthropic)</h4>
                    <p class="text-sm text-gray-300">AI Co-Developer</p>
                    <p class="text-sm text-gray-300">Ù…Ø·ÙˆØ± Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ</p>
                    <p class="text-xs text-gray-400 mt-2">Implementation & Integration</p>
                </div>
            </div>
            
            <div class="mt-4 text-center">
                <p class="text-sm text-gray-300">
                    <i class="fas fa-lightbulb mr-2 text-yellow-400"></i>
                    Born from "Idea Vibing" Sessions - Creative Human-AI Collaboration
                </p>
                <p class="text-sm text-gray-300">
                    ÙˆÙÙ„Ø¯ Ù…Ù† Ø¬Ù„Ø³Ø§Øª "ÙØ§ÙŠØ¨ÙŠÙ†Øº Ø§Ù„Ø£ÙÙƒØ§Ø±" - ØªØ¹Ø§ÙˆÙ† Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ Ø¨ÙŠÙ† Ø§Ù„Ø¥Ù†Ø³Ø§Ù† ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
                </p>
            </div>
        </div>

        <!-- Final Warning -->
        <div class="bg-red-900/20 border border-red-500 rounded-xl p-4 mt-6 text-center">
            <div class="text-red-300 font-bold mb-2">
                âš ï¸ RESEARCH TOOL ONLY - NOT FOR MEDICAL OR THERAPEUTIC USE âš ï¸
            </div>
            <div class="text-red-300 font-bold mb-2">
                âš ï¸ Ø£Ø¯Ø§Ø© Ø¨Ø­Ø«ÙŠØ© ÙÙ‚Ø· - Ù„ÙŠØ³ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø¨ÙŠ Ø£Ùˆ Ø§Ù„Ø¹Ù„Ø§Ø¬ÙŠ âš ï¸
            </div>
            <div class="text-xs text-red-200">
                This simulator is for understanding probabilistic cognition in research contexts.
                Never use for diagnosis, therapy, or important personal decisions.
            </div>
            <div class="text-xs text-red-200">
                Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­Ø§ÙƒÙŠ Ù„ÙÙ‡Ù… Ø§Ù„Ø¥Ø¯Ø±Ø§Ùƒ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ÙŠ ÙÙŠ Ø³ÙŠØ§Ù‚Ø§Øª Ø§Ù„Ø¨Ø­Ø«.
                Ù„Ø§ ØªØ³ØªØ®Ø¯Ù…Ù‡ Ø£Ø¨Ø¯Ø§Ù‹ Ù„Ù„ØªØ´Ø®ÙŠØµ Ø£Ùˆ Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø£Ùˆ Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„Ù…Ù‡Ù…Ø©.
            </div>
        </div>
    </div>

    <script>
        function humanCognitionCPF() {
            return {
                // Human state
                humanState: {
                    mood: {
                        joy: 0.5,
                        despair: 0.2,
                        clarity: 0.7,
                        anxiety: 0.3
                    },
                    cognitive: {
                        energy: 0.8,
                        focus: 0.6
                    }
                },
                
                // Context
                context: {
                    timePressure: 0.3,
                    socialPressure: 0.4,
                    informationCompleteness: 0.6,
                    stakesLevel: 0.5
                },
                
                // Scenarios
                scenarios: {
                    childhood_memory: {
                        nameEn: "Childhood Birthday Memory",
                        nameAr: "Ø°ÙƒØ±Ù‰ Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø§Ù„Ø·ÙÙˆÙ„Ø©",
                        descriptionEn: "Recalling a childhood birthday party",
                        descriptionAr: "Ø§Ø³ØªØ°ÙƒØ§Ø± Ø­ÙÙ„Ø© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ù…Ù† Ø§Ù„Ø·ÙÙˆÙ„Ø©",
                        type: "memory_reconstruction"
                    },
                    career_decision: {
                        nameEn: "Career Choice Decision",
                        nameAr: "Ù‚Ø±Ø§Ø± Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ù‡Ù†ÙŠ",
                        descriptionEn: "Choosing between job opportunities",
                        descriptionAr: "Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø¨ÙŠÙ† ÙØ±Øµ Ø§Ù„Ø¹Ù…Ù„",
                        type: "decision_collapse"
                    },
                    relationship_memory: {
                        nameEn: "Relationship Memory",
                        nameAr: "Ø°ÙƒØ±Ù‰ Ø¹Ù„Ø§Ù‚Ø© Ø´Ø®ØµÙŠØ©",
                        descriptionEn: "Recalling a significant relationship moment",
                        descriptionAr: "Ø§Ø³ØªØ°ÙƒØ§Ø± Ù„Ø­Ø¸Ø© Ù…Ù‡Ù…Ø© ÙÙŠ Ø¹Ù„Ø§Ù‚Ø© Ø´Ø®ØµÙŠØ©",
                        type: "memory_reconstruction"
                    },
                    life_choice: {
                        nameEn: "Major Life Decision",
                        nameAr: "Ù‚Ø±Ø§Ø± Ø­ÙŠØ§ØªÙŠ Ù…Ù‡Ù…",
                        descriptionEn: "Making a major life-changing decision",
                        descriptionAr: "Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø± Ù…Ù‡Ù… ÙŠØºÙŠØ± Ù…Ø¬Ø±Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©",
                        type: "decision_collapse"
                    },
                    creative_memory: {
                        nameEn: "Creative Achievement",
                        nameAr: "Ø¥Ù†Ø¬Ø§Ø² Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ",
                        descriptionEn: "Remembering a moment of creative breakthrough",
                        descriptionAr: "ØªØ°ÙƒØ± Ù„Ø­Ø¸Ø© Ø§Ø®ØªØ±Ø§Ù‚ Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ",
                        type: "memory_reconstruction"
                    }
                },
                
                selectedScenario: 'childhood_memory',
                isProcessing: false,
                currentResult: null,
                resultHistory: [],
                currentWebPPLCode: '',
                
                init() {
                    this.logToWebPPL('System initialized / Ø§Ù„Ù†Ø¸Ø§Ù… Ù…ÙØ¬Ù‡Ø²');
                    this.logToWebPPL('Ready for probabilistic cognitive processing');
                },
                
                async processMemoryReconstruction() {
                    if (this.isProcessing) return;
                    
                    this.isProcessing = true;
                    this.logToWebPPL('Starting memory reconstruction / Ø¨Ø¯Ø¡ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø°Ø§ÙƒØ±Ø©...');
                    
                    try {
                        const result = await this.runWebPPLMemoryReconstruction();
                        this.currentResult = result;
                        this.addToHistory(result);
                        this.logToWebPPL(`Memory reconstructed: ${result.confidence.toFixed(3)} confidence`);
                    } catch (error) {
                        this.logToWebPPL(`Error: ${error.message}`);
                    } finally {
                        this.isProcessing = false;
                    }
                },
                
                async processDecisionCollapse() {
                    if (this.isProcessing) return;
                    
                    this.isProcessing = true;
                    this.logToWebPPL('Starting decision collapse / Ø¨Ø¯Ø¡ Ø§Ù†Ù‡ÙŠØ§Ø± Ø§Ù„Ù‚Ø±Ø§Ø±...');
                    
                    try {
                        const result = await this.runWebPPLDecisionCollapse();
                        this.currentResult = result;
                        this.addToHistory(result);
                        this.logToWebPPL(`Decision collapsed: ${result.content}`);
                    } catch (error) {
                        this.logToWebPPL(`Error: ${error.message}`);
                    } finally {
                        this.isProcessing = false;
                    }
                },
                
                async runMultipleVariations() {
                    this.logToWebPPL('Running 5 variations / ØªØ´ØºÙŠÙ„ 5 ØªÙ†ÙˆÙŠØ¹Ø§Øª...');
                    
                    for (let i = 0; i < 5; i++) {
                        if (this.scenarios[this.selectedScenario].type === 'memory_reconstruction') {
                            await this.processMemoryReconstruction();
                        } else {
                            await this.processDecisionCollapse();
                        }
                        
                        // Small delay between runs
                        await new Promise(resolve => setTimeout(resolve, 300));
                    }
                    
                    this.logToWebPPL('All variations completed / Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ†ÙˆÙŠØ¹Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©');
                },
                
                async runWebPPLMemoryReconstruction() {
                    const scenario = this.scenarios[this.selectedScenario];
                    
                    // Generate WebPPL code for memory reconstruction
                    const webpplCode = `
// CPF~ Lite Memory Reconstruction with Real WebPPL
var memoryReconstruction = function() {
    // Current mood state (from UI)
    var joyLevel = ${this.humanState.mood.joy};
    var despairLevel = ${this.humanState.mood.despair};
    var clarityLevel = ${this.humanState.mood.clarity};
    var anxietyLevel = ${this.humanState.mood.anxiety};
    
    // Cognitive state
    var energyLevel = ${this.humanState.cognitive.energy};
    var focusLevel = ${this.humanState.cognitive.focus};
    
    // Context factors
    var timePressure = ${this.context.timePressure};
    var socialPressure = ${this.context.socialPressure};
    
    // Emotional encryption/decryption
    var emotionalKey = beta(joyLevel * 5 + clarityLevel * 3, despairLevel * 5 + anxietyLevel * 3);
    
    // Memory reconstruction confidence
    var baseConfidence = beta(energyLevel * 8, (1 - energyLevel) * 8);
    var moodBias = gaussian(joyLevel - despairLevel, 0.3);
    
    // Contextual reconstruction bias
    var contextualBias = gaussian(clarityLevel - timePressure, 0.2);
    
    // Final reconstruction variation
    var reconstructionNoise = exponential(2);
    var finalConfidence = Math.max(0.1, Math.min(0.95, baseConfidence + contextualBias * 0.2));
    
    // Memory content varies based on mood
    var contentVariation = discrete([0.3, 0.4, 0.3]); // negative, neutral, positive
    
    return {
        confidence: finalConfidence,
        emotionalColoring: emotionalKey,
        moodBias: moodBias,
        contextualInfluence: contextualBias,
        reconstructionVariation: reconstructionNoise,
        contentTone: contentVariation,
        coherence: beta(7, 3)
    };
};

memoryReconstruction();`;
                    
                    this.currentWebPPLCode = webpplCode;
                    
                    return new Promise((resolve, reject) => {
                        try {
                            // Run actual WebPPL code
                            webppl.run(webpplCode, (err, result) => {
                                if (err) {
                                    reject(err);
                                } else {
                                    // Process WebPPL result
                                    const processedResult = this.processWebPPLMemoryResult(result, scenario);
                                    resolve(processedResult);
                                }
                            });
                        } catch (error) {
                            reject(error);
                        }
                    });
                },
                
                async runWebPPLDecisionCollapse() {
                    const scenario = this.scenarios[this.selectedScenario];
                    
                    // Generate WebPPL code for decision collapse
                    const webpplCode = `
// CPF~ Lite Decision Collapse with Real WebPPL
var decisionCollapse = function() {
    // Current state (from UI)
    var energyLevel = ${this.humanState.cognitive.energy};
    var clarityLevel = ${this.humanState.mood.clarity};
    var anxietyLevel = ${this.humanState.mood.anxiety};
    var timePressure = ${this.context.timePressure};
    var stakesLevel = ${this.context.stakesLevel};
    var infoComplete = ${this.context.informationCompleteness};
    
    // Decision options in superposition
    var option1Prob = beta(5, 3); // Conservative choice
    var option2Prob = beta(3, 5); // Risky choice
    var option3Prob = beta(4, 4); // Balanced choice
    
    // Collapse conditions
    var collapseThreshold = 0.7;
    var pressureCollapse = timePressure > 0.6 || anxietyLevel > 0.7;
    var confidenceCollapse = Math.max(option1Prob, option2Prob, option3Prob) > collapseThreshold;
    
    // Trust matrix influence
    var trustFactor = beta(clarityLevel * 6, anxietyLevel * 4);
    
    // Social modeling influence
    var socialInfluence = gaussian(0, ${this.context.socialPressure} * 0.3);
    
    // Final decision collapse
    var shouldCollapse = pressureCollapse || confidenceCollapse;
    
    if (shouldCollapse) {
        // Collapse to most probable option
        var options = [option1Prob, option2Prob, option3Prob];
        var maxIndex = options.indexOf(Math.max(...options));
        
        return {
            collapsed: true,
            chosenOption: maxIndex,
            confidence: Math.max(...options),
            collapseReason: pressureCollapse ? "pressure" : "confidence",
            trustInfluence: trustFactor,
            socialInfluence: socialInfluence,
            coherence: beta(6, 4),
            variation: exponential(1.5)
        };
    } else {
        return {
            collapsed: false,
            superpositionState: [option1Prob, option2Prob, option3Prob],
            collapseProb: Math.max(...[option1Prob, option2Prob, option3Prob]),
            confidence: 0.5,
            coherence: beta(8, 2),
            variation: exponential(2)
        };
    }
};

decisionCollapse();`;
                    
                    this.currentWebPPLCode = webpplCode;
                    
                    return new Promise((resolve, reject) => {
                        try {
                            // Run actual WebPPL code
                            webppl.run(webpplCode, (err, result) => {
                                if (err) {
                                    reject(err);
                                } else {
                                    // Process WebPPL result
                                    const processedResult = this.processWebPPLDecisionResult(result, scenario);
                                    resolve(processedResult);
                                }
                            });
                        } catch (error) {
                            reject(error);
                        }
                    });
                },
                
                processWebPPLMemoryResult(webpplResult, scenario) {
                    // Generate memory content based on WebPPL calculations
                    const contents = {
                        childhood_memory: [
                            {
                                negative: "ÙƒØ§Ù†Øª Ø§Ù„Ø­ÙÙ„Ø© ØºØ±ÙŠØ¨Ø© Ù†ÙˆØ¹Ø§Ù‹ Ù…Ø§ØŒ Ø£Ø´Ø¹Ø± Ø£Ù† Ù‡Ù†Ø§Ùƒ Ø´ÙŠØ¦Ø§Ù‹ ÙƒØ§Ù† Ù…ÙÙ‚ÙˆØ¯Ø§Ù‹ Ø±ØºÙ… ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¬Ù…ÙŠØ¹",
                                neutral: "Ø­ÙÙ„Ø© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø¹Ø§Ø¯ÙŠØ© Ù…Ø¹ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©ØŒ ÙƒØ¹ÙƒØ© Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© ÙˆØ¨Ø¹Ø¶ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ø§Ù„Ø¬Ù…ÙŠÙ„Ø©",
                                positive: "Ø£Ø¬Ù…Ù„ Ø­ÙÙ„Ø© ÙÙŠ Ø­ÙŠØ§ØªÙŠ! Ø§Ù„Ø´Ù…Ø³ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©ØŒ Ø¶Ø­ÙƒØ§Øª Ø§Ù„Ø£Ø­Ø¨Ø§Ø¡ØŒ Ø·Ø¹Ù… Ø§Ù„ÙƒØ¹ÙƒØ© Ø§Ù„Ø³Ø­Ø±ÙŠ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙÙ†Ø³Ù‰"
                            }
                        ],
                        relationship_memory: [
                            {
                                negative: "ØªÙ„Ùƒ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø©... ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ØªÙˆØªØ± Ø®ÙÙŠØŒ ÙƒÙ„Ù…Ø§Øª Ù„Ù… ØªÙÙ‚Ù„ØŒ Ù…Ø³Ø§ÙØ© Ø±ØºÙ… Ø§Ù„Ù‚ÙØ±Ø¨",
                                neutral: "Ù…Ø­Ø§Ø¯Ø«Ø© ØµØ±ÙŠØ­Ø© ÙˆÙ…ÙÙŠØ¯Ø©ØŒ ÙˆØ¶Ø­Ù†Ø§ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ù…ÙˆØ± ÙˆÙÙ‡Ù…Ù†Ø§ Ø¨Ø¹Ø¶Ù†Ø§ Ø£ÙƒØ«Ø±",
                                positive: "Ù„Ø­Ø¸Ø© Ø³Ø­Ø±ÙŠØ© Ù…Ù† Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø¹ÙŠÙˆÙ† ØªØªÙƒÙ„Ù…ØŒ Ù‚Ù„ÙˆØ¨ ØªØªÙÙ‡Ù…ØŒ Ø±ÙˆØ§Ø¨Ø· ØªØªÙ‚ÙˆÙ‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¨Ø¯"
                            }
                        ],
                        creative_memory: [
                            {
                                negative: "Ø°Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ… Ø¹Ù†Ø¯Ù…Ø§ Ø¸Ù†Ù†Øª Ø£Ù†Ù†ÙŠ Ø£Ø¨Ø¯Ø¹Øª Ø´ÙŠØ¦Ø§Ù‹ØŒ Ù„ÙƒÙ† Ø±Ø¨Ù…Ø§ ÙƒØ§Ù† Ù…Ø¬Ø±Ø¯ ÙˆÙ‡Ù… Ø£Ùˆ ØªÙ‚Ù„ÙŠØ¯ Ù„Ø§ ÙˆØ§Ø¹ÙŠ",
                                neutral: "Ù„Ø­Ø¸Ø© Ø¥Ù†Ø¬Ø§Ø² Ø¬Ù…ÙŠÙ„Ø©ØŒ Ø¹Ù…Ù„ Ø¬ÙŠØ¯ Ø§Ø³ØªØºØ±Ù‚ ÙˆÙ‚ØªØ§Ù‹ ÙˆØ¬Ù‡Ø¯Ø§Ù‹ØŒ Ø´Ø¹ÙˆØ± Ø¨Ø§Ù„Ø±Ø¶Ø§ ÙˆØ§Ù„Ø¥ÙƒÙ…Ø§Ù„",
                                positive: "Ø§Ù†ÙØ¬Ø§Ø± Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ Ù„Ø§ ÙŠÙÙˆØµÙ! ÙƒØ£Ù† Ø§Ù„ÙƒÙˆÙ† ÙØªØ­ Ø£Ø¨ÙˆØ§Ø¨Ù‡ØŒ Ø§Ù„Ø£ÙÙƒØ§Ø± ØªØªØ¯ÙÙ‚ ÙƒØ§Ù„Ù†Ù‡Ø±ØŒ Ø³Ø­Ø± Ø§Ù„Ø®Ù„Ù‚ ÙÙŠ Ø£Ø¨Ù‡Ù‰ ØµÙˆØ±Ù‡"
                            }
                        ]
                    };
                    
                    const scenarioContents = contents[this.selectedScenario] || contents.childhood_memory;
                    const contentArray = scenarioContents[0];
                    
                    let selectedContent;
                    if (webpplResult.contentTone === 0) {
                        selectedContent = contentArray.negative;
                    } else if (webpplResult.contentTone === 1) {
                        selectedContent = contentArray.neutral;
                    } else {
                        selectedContent = contentArray.positive;
                    }
                    
                    return {
                        type: "Memory Reconstruction",
                        description: `${scenario.nameEn} / ${scenario.nameAr}`,
                        content: selectedContent,
                        confidence: webpplResult.confidence,
                        variation: webpplResult.reconstructionVariation,
                        coherence: webpplResult.coherence,
                        probabilisticDetails: [
                            `Emotional encryption key: ${webpplResult.emotionalColoring.toFixed(3)}`,
                            `Mood bias influence: ${webpplResult.moodBias.toFixed(3)}`,
                            `Contextual reconstruction: ${webpplResult.contextualInfluence.toFixed(3)}`,
                            `Content emotional tone: ${['Negative', 'Neutral', 'Positive'][webpplResult.contentTone]}`,
                            `Reconstruction noise: ${webpplResult.reconstructionVariation.toFixed(3)}`
                        ],
                        timestamp: new Date().toLocaleTimeString('ar-SA')
                    };
                },
                
                processWebPPLDecisionResult(webpplResult, scenario) {
                    const decisions = {
                        career_decision: [
                            "Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¢Ù…Ù†Ø© ÙÙŠ Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© - Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ù…Ø§Ù„ÙŠ ÙˆØ£Ù…Ø§Ù† ÙˆØ¸ÙŠÙÙŠ",
                            "Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù†Ø§Ø´Ø¦Ø© - Ù…Ø®Ø§Ø·Ø±Ø© Ù…Ø­Ø³ÙˆØ¨Ø© Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª Ù†Ù…Ùˆ Ù‡Ø§Ø¦Ù„Ø©",
                            "Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø­Ø± ÙˆØ§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª - Ø­Ø±ÙŠØ© ÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø´Ø®ØµÙŠØ© Ø£ÙƒØ¨Ø±"
                        ],
                        life_choice: [
                            "Ø§Ù„Ø¨Ù‚Ø§Ø¡ ÙÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© - Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ",
                            "Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¬Ø¯ÙŠØ¯Ø© - Ù…ØºØ§Ù…Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙØ±Øµ Ù„Ù„Ù†Ù…Ùˆ ÙˆØ§Ù„ØªØ·ÙˆØ±",
                            "Ø§Ù„Ø³ÙØ± Ù„ÙØªØ±Ø© Ù‚Ø¨Ù„ Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø± Ù†Ù‡Ø§Ø¦ÙŠ - Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø£ÙƒØ«Ø±"
                        ]
                    };
                    
                    const scenarioDecisions = decisions[this.selectedScenario] || decisions.career_decision;
                    
                    if (webpplResult.collapsed) {
                        const chosenDecision = scenarioDecisions[webpplResult.chosenOption];
                        const collapseReasonAr = webpplResult.collapseReason === "pressure" ? "Ø¶ØºØ· Ø§Ù„ÙˆÙ‚Øª" : "ÙˆØµÙˆÙ„ Ù„Ù„Ø«Ù‚Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©";
                        
                        return {
                            type: "Decision Collapse",
                            description: `${scenario.nameEn} / ${scenario.nameAr}`,
                            content: chosenDecision,
                            confidence: webpplResult.confidence,
                            variation: webpplResult.variation,
                            coherence: webpplResult.coherence,
                            probabilisticDetails: [
                                `Decision collapsed: ${webpplResult.collapsed}`,
                                `Chosen option index: ${webpplResult.chosenOption}`,
                                `Collapse reason: ${webpplResult.collapseReason} / ${collapseReasonAr}`,
                                `Trust matrix influence: ${webpplResult.trustInfluence.toFixed(3)}`,
                                `Social modeling effect: ${webpplResult.socialInfluence.toFixed(3)}`,
                                `Final confidence: ${webpplResult.confidence.toFixed(3)}`
                            ],
                            timestamp: new Date().toLocaleTimeString('ar-SA')
                        };
                    } else {
                        return {
                            type: "Decision Superposition",
                            description: `${scenario.nameEn} / ${scenario.nameAr}`,
                            content: "Ø§Ù„Ù‚Ø±Ø§Ø± Ù„Ø§ ÙŠØ²Ø§Ù„ ÙÙŠ Ø­Ø§Ù„Ø© ØªØ±Ø§ÙƒØ¨ ÙƒÙ…ÙŠ - Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© ÙˆÙ„Ù… ÙŠØ­Ø¯Ø« Ø§Ù†Ù‡ÙŠØ§Ø± Ø¨Ø¹Ø¯",
                            confidence: webpplResult.confidence,
                            variation: webpplResult.variation,
                            coherence: webpplResult.coherence,
                            probabilisticDetails: [
                                `Superposition maintained: ${!webpplResult.collapsed}`,
                                `Option 1 probability: ${webpplResult.superpositionState[0].toFixed(3)}`,
                                `Option 2 probability: ${webpplResult.superpositionState[1].toFixed(3)}`,
                                `Option 3 probability: ${webpplResult.superpositionState[2].toFixed(3)}`,
                                `Collapse probability: ${webpplResult.collapseProb.toFixed(3)}`,
                                `System coherence: ${webpplResult.coherence.toFixed(3)}`
                            ],
                            timestamp: new Date().toLocaleTimeString('ar-SA')
                        };
                    }
                },
                
                addToHistory(result) {
                    this.resultHistory.unshift(result);
                    if (this.resultHistory.length > 20) {
                        this.resultHistory = this.resultHistory.slice(0, 20);
                    }
                },
                
                getUniqueResultsCount() {
                    const uniqueContents = new Set(this.resultHistory.map(r => r.content.substring(0, 50)));
                    return uniqueContents.size;
                },
                
                getAverageConfidence() {
                    if (this.resultHistory.length === 0) return 0;
                    const sum = this.resultHistory.reduce((acc, r) => acc + (r.confidence || 0), 0);
                    return (sum / this.resultHistory.length) * 100;
                },
                
                getVariationDiversity() {
                    if (this.resultHistory.length < 2) return "N/A";
                    const variations = this.resultHistory.map(r => r.variation || 0);
                    const avg = variations.reduce((a, b) => a + b, 0) / variations.length;
                    return avg > 2 ? "High" : avg > 1 ? "Medium" : "Low";
                },
                
                resetSystem() {
                    this.humanState = {
                        mood: { joy: 0.5, despair: 0.2, clarity: 0.7, anxiety: 0.3 },
                        cognitive: { energy: 0.8, focus: 0.6 }
                    };
                    this.context = {
                        timePressure: 0.3,
                        socialPressure: 0.4,
                        informationCompleteness: 0.6,
                        stakesLevel: 0.5
                    };
                    this.currentResult = null;
                    this.resultHistory = [];
                    this.currentWebPPLCode = '';
                    this.selectedScenario = 'childhood_memory';
                    
                    this.logToWebPPL('System reset / Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù…');
                },
                
                logToWebPPL(message) {
                    const log = document.getElementById('webpplLog');
                    if (log) {
                        const timestamp = new Date().toLocaleTimeString('ar-SA');
                        log.innerHTML += `<div>[${timestamp}] ${message}</div>`;
                        log.scrollTop = log.scrollHeight;
                    }
                }
            }
        }
    </script>
</body>
</html>